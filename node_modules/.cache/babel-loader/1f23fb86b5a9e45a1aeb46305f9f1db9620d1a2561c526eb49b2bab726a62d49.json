{"ast":null,"code":"import React,{useState,useRef,useEffect}from'react';import{useNavigate}from'react-router-dom';import'./Generate.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function GenerateCharacter(){const navigate=useNavigate();const[prompt,setPrompt]=useState('');const[imageFile,setImageFile]=useState(null);const[imageURL,setImageURL]=useState(null);const[loading,setLoading]=useState(false);const[isLoggedIn,setIsLoggedIn]=useState(null);const[showLoginModal,setShowLoginModal]=useState(false);const canvasRef=useRef(null);const imgRef=useRef(null);const[isDrawing,setIsDrawing]=useState(false);const[lastPos,setLastPos]=useState({x:0,y:0});useEffect(()=>{fetch('http://storysight.ru/api/auth/me',{credentials:'include'}).then(res=>{if(res.ok)return res.json();throw new Error('Неавторизован');}).then(()=>setIsLoggedIn(true)).catch(()=>setIsLoggedIn(false));},[]);const handleImageUpload=e=>{const file=e.target.files[0];if(!file)return;setImageFile(file);const url=URL.createObjectURL(file);setImageURL(url);};const handleMouseDown=e=>{if(!canvasRef.current)return;setIsDrawing(true);const rect=canvasRef.current.getBoundingClientRect();setLastPos({x:e.clientX-rect.left,y:e.clientY-rect.top});};const handleMouseUp=()=>{setIsDrawing(false);};const handleMouseMove=e=>{if(!isDrawing||!canvasRef.current)return;const ctx=canvasRef.current.getContext('2d');const rect=canvasRef.current.getBoundingClientRect();const currentX=e.clientX-rect.left;const currentY=e.clientY-rect.top;ctx.strokeStyle='white';ctx.lineWidth=20;ctx.lineCap='round';ctx.globalAlpha=1.0;ctx.beginPath();ctx.moveTo(lastPos.x,lastPos.y);ctx.lineTo(currentX,currentY);ctx.stroke();setLastPos({x:currentX,y:currentY});};const clearMask=()=>{if(!canvasRef.current)return;const ctx=canvasRef.current.getContext('2d');ctx.clearRect(0,0,canvasRef.current.width,canvasRef.current.height);};useEffect(()=>{clearMask();},[imageURL]);const handleGenerateClick=async()=>{if(!isLoggedIn){setShowLoginModal(true);return;}if(!prompt.trim()){alert('Пожалуйста, введите промпт.');return;}if(!imageFile){alert('Пожалуйста, загрузите изображение.');return;}setLoading(true);try{const formData=new FormData();formData.append('prompt',prompt);formData.append('character_name','MyCharacter');formData.append('init_image',imageFile);const maskBlob=await new Promise(resolve=>canvasRef.current.toBlob(resolve,'image/png'));formData.append('mask_image',maskBlob);const response=await fetch('http://storysight.ru/api/edit-character',{method:'POST',body:formData});if(!response.ok){const errorData=await response.json();throw new Error(errorData.detail||'Ошибка на сервере');}const data=await response.json();navigate('/result-main',{state:{images:[\"data:image/png;base64,\".concat(data.images[0])],prompts:[prompt],storyline:'Изменено в редакторе'}});}catch(error){alert('Ошибка генерации: '+error.message);}finally{setLoading(false);}};// Telegram Login Widget\nuseEffect(()=>{if(!showLoginModal)return;window.TelegramLoginWidget={dataOnauth:function(user){fetch('http://storysight.ru/api/auth/login',{method:'POST',headers:{'Content-Type':'application/json'},credentials:'include',body:JSON.stringify(user)}).then(res=>{if(!res.ok)throw new Error('Ошибка авторизации');return res.json();}).then(()=>{setIsLoggedIn(true);setShowLoginModal(false);}).catch(err=>alert('Ошибка авторизации: '+err.message));}};const script=document.createElement('script');script.src='https://telegram.org/js/telegram-widget.js?22';script.setAttribute('data-telegram-login','zavod_worker_bot');// без @\nscript.setAttribute('data-size','large');script.setAttribute('data-userpic','false');script.setAttribute('data-request-access','write');script.setAttribute('data-onauth','TelegramLoginWidget.dataOnauth(user)');script.async=true;const container=document.getElementById('tg-login-button');container.innerHTML='';container.appendChild(script);},[showLoginModal]);return/*#__PURE__*/_jsxs(\"div\",{className:\"generate-container\",style:{maxWidth:600,margin:'30px auto',padding:20},children:[/*#__PURE__*/_jsx(\"h1\",{className:\"generate-title\",style:{marginBottom:20},children:\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u0438\\u0435 \\u0438\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u044F (Image2Image \\u0441 \\u043C\\u0430\\u0441\\u043A\\u043E\\u0439)\"}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:14,color:'#555',marginBottom:20},children:\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u0435 \\u0438\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u0435, \\u0432\\u044B\\u0434\\u0435\\u043B\\u0438\\u0442\\u0435 \\u043E\\u0431\\u043B\\u0430\\u0441\\u0442\\u044C \\u0434\\u043B\\u044F \\u0438\\u0437\\u043C\\u0435\\u043D\\u0435\\u043D\\u0438\\u044F, \\u0432\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043F\\u0440\\u043E\\u043C\\u043F\\u0442 \\u0438 \\u043D\\u0430\\u0436\\u043C\\u0438\\u0442\\u0435 \\\"\\u041D\\u0430\\u0447\\u0430\\u0442\\u044C \\u0433\\u0435\\u043D\\u0435\\u0440\\u0430\\u0446\\u0438\\u044E\\\".\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"generate-textarea\",placeholder:\"\\u041E\\u043F\\u0438\\u0448\\u0438\\u0442\\u0435, \\u0447\\u0442\\u043E \\u0445\\u043E\\u0442\\u0438\\u0442\\u0435 \\u0434\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0438\\u043B\\u0438 \\u0438\\u0437\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C...\",value:prompt,onChange:e=>setPrompt(e.target.value),rows:3,disabled:loading}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:20},children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:handleImageUpload,disabled:loading,style:{marginBottom:10}}),imageURL&&/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative',border:'1px solid #ddd',borderRadius:6},children:[/*#__PURE__*/_jsx(\"img\",{ref:imgRef,src:imageURL,alt:\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0436\\u0435\\u043D\\u043D\\u043E\\u0435\",style:{display:'block',maxWidth:'100%',borderRadius:6},onLoad:()=>{if(imgRef.current&&canvasRef.current){canvasRef.current.width=imgRef.current.width;canvasRef.current.height=imgRef.current.height;}clearMask();}}),/*#__PURE__*/_jsx(\"canvas\",{ref:canvasRef,style:{position:'absolute',top:0,left:0,cursor:'crosshair',borderRadius:6,userSelect:'none'},onMouseDown:handleMouseDown,onMouseUp:handleMouseUp,onMouseLeave:handleMouseUp,onMouseMove:handleMouseMove})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"generate-nav\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(-1),disabled:loading,className:\"generate-btn\",style:{flex:1,backgroundColor:'#fff',color:'#6b4c9a',border:'2px solid #b76aff'},children:\"\\u041D\\u0430\\u0437\\u0430\\u0434\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleGenerateClick,disabled:loading,className:\"generate-btn\",style:{flex:2},children:loading?'Генерация...':'Начать генерацию'})]}),showLoginModal&&/*#__PURE__*/_jsx(\"div\",{style:{position:'fixed',top:0,left:0,right:0,bottom:0,backgroundColor:'rgba(0,0,0,0.5)',display:'flex',justifyContent:'center',alignItems:'center',zIndex:1000},onClick:()=>setShowLoginModal(false),children:/*#__PURE__*/_jsxs(\"div\",{onClick:e=>e.stopPropagation(),style:{backgroundColor:'white',padding:20,borderRadius:10,maxWidth:400,width:'90%',textAlign:'center',color:'#000'},children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u0414\\u043B\\u044F \\u0433\\u0435\\u043D\\u0435\\u0440\\u0430\\u0446\\u0438\\u0438 \\u043D\\u0443\\u0436\\u043D\\u043E \\u0432\\u043E\\u0439\\u0442\\u0438 \\u0447\\u0435\\u0440\\u0435\\u0437 Telegram\"}),/*#__PURE__*/_jsx(\"div\",{id:\"tg-login-button\",style:{marginBottom:10}}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowLoginModal(false),style:{padding:'6px 12px',borderRadius:6,border:'1px solid #ccc',backgroundColor:'white',cursor:'pointer'},children:\"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"})]})})]});}","map":{"version":3,"names":["React","useState","useRef","useEffect","useNavigate","jsx","_jsx","jsxs","_jsxs","GenerateCharacter","navigate","prompt","setPrompt","imageFile","setImageFile","imageURL","setImageURL","loading","setLoading","isLoggedIn","setIsLoggedIn","showLoginModal","setShowLoginModal","canvasRef","imgRef","isDrawing","setIsDrawing","lastPos","setLastPos","x","y","fetch","credentials","then","res","ok","json","Error","catch","handleImageUpload","e","file","target","files","url","URL","createObjectURL","handleMouseDown","current","rect","getBoundingClientRect","clientX","left","clientY","top","handleMouseUp","handleMouseMove","ctx","getContext","currentX","currentY","strokeStyle","lineWidth","lineCap","globalAlpha","beginPath","moveTo","lineTo","stroke","clearMask","clearRect","width","height","handleGenerateClick","trim","alert","formData","FormData","append","maskBlob","Promise","resolve","toBlob","response","method","body","errorData","detail","data","state","images","concat","prompts","storyline","error","message","window","TelegramLoginWidget","dataOnauth","user","headers","JSON","stringify","err","script","document","createElement","src","setAttribute","async","container","getElementById","innerHTML","appendChild","className","style","maxWidth","margin","padding","children","marginBottom","fontSize","color","placeholder","value","onChange","rows","disabled","type","accept","position","border","borderRadius","ref","alt","display","onLoad","cursor","userSelect","onMouseDown","onMouseUp","onMouseLeave","onMouseMove","onClick","flex","backgroundColor","right","bottom","justifyContent","alignItems","zIndex","stopPropagation","textAlign","id"],"sources":["/var/www/storysight/src/pages/GenerateCharacter.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport './Generate.css';\n\nexport default function GenerateCharacter() {\n    const navigate = useNavigate();\n\n    const [prompt, setPrompt] = useState('');\n    const [imageFile, setImageFile] = useState(null);\n    const [imageURL, setImageURL] = useState(null);\n    const [loading, setLoading] = useState(false);\n\n    const [isLoggedIn, setIsLoggedIn] = useState(null);\n    const [showLoginModal, setShowLoginModal] = useState(false);\n\n    const canvasRef = useRef(null);\n    const imgRef = useRef(null);\n    const [isDrawing, setIsDrawing] = useState(false);\n    const [lastPos, setLastPos] = useState({ x: 0, y: 0 });\n\n    useEffect(() => {\n        fetch('http://storysight.ru/api/auth/me', {\n            credentials: 'include',\n        })\n            .then(res => {\n                if (res.ok) return res.json();\n                throw new Error('Неавторизован');\n            })\n            .then(() => setIsLoggedIn(true))\n            .catch(() => setIsLoggedIn(false));\n    }, []);\n\n    const handleImageUpload = (e) => {\n        const file = e.target.files[0];\n        if (!file) return;\n        setImageFile(file);\n        const url = URL.createObjectURL(file);\n        setImageURL(url);\n    };\n\n    const handleMouseDown = (e) => {\n        if (!canvasRef.current) return;\n        setIsDrawing(true);\n        const rect = canvasRef.current.getBoundingClientRect();\n        setLastPos({ x: e.clientX - rect.left, y: e.clientY - rect.top });\n    };\n\n    const handleMouseUp = () => {\n        setIsDrawing(false);\n    };\n\n    const handleMouseMove = (e) => {\n        if (!isDrawing || !canvasRef.current) return;\n        const ctx = canvasRef.current.getContext('2d');\n        const rect = canvasRef.current.getBoundingClientRect();\n        const currentX = e.clientX - rect.left;\n        const currentY = e.clientY - rect.top;\n\n        ctx.strokeStyle = 'white';\n        ctx.lineWidth = 20;\n        ctx.lineCap = 'round';\n        ctx.globalAlpha = 1.0;\n\n        ctx.beginPath();\n        ctx.moveTo(lastPos.x, lastPos.y);\n        ctx.lineTo(currentX, currentY);\n        ctx.stroke();\n\n        setLastPos({ x: currentX, y: currentY });\n    };\n\n    const clearMask = () => {\n        if (!canvasRef.current) return;\n        const ctx = canvasRef.current.getContext('2d');\n        ctx.clearRect(0, 0, canvasRef.current.width, canvasRef.current.height);\n    };\n\n    useEffect(() => {\n        clearMask();\n    }, [imageURL]);\n\n    const handleGenerateClick = async () => {\n        if (!isLoggedIn) {\n            setShowLoginModal(true);\n            return;\n        }\n\n        if (!prompt.trim()) {\n            alert('Пожалуйста, введите промпт.');\n            return;\n        }\n        if (!imageFile) {\n            alert('Пожалуйста, загрузите изображение.');\n            return;\n        }\n\n        setLoading(true);\n\n        try {\n            const formData = new FormData();\n            formData.append('prompt', prompt);\n            formData.append('character_name', 'MyCharacter');\n            formData.append('init_image', imageFile);\n\n            const maskBlob = await new Promise((resolve) =>\n                canvasRef.current.toBlob(resolve, 'image/png')\n            );\n            formData.append('mask_image', maskBlob);\n\n            const response = await fetch('http://storysight.ru/api/edit-character', {\n                method: 'POST',\n                body: formData,\n            });\n\n            if (!response.ok) {\n                const errorData = await response.json();\n                throw new Error(errorData.detail || 'Ошибка на сервере');\n            }\n\n            const data = await response.json();\n\n            navigate('/result-main', {\n                state: {\n                    images: [`data:image/png;base64,${data.images[0]}`],\n                    prompts: [prompt],\n                    storyline: 'Изменено в редакторе',\n                },\n            });\n        } catch (error) {\n            alert('Ошибка генерации: ' + error.message);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    // Telegram Login Widget\n    useEffect(() => {\n        if (!showLoginModal) return;\n\n        window.TelegramLoginWidget = {\n            dataOnauth: function (user) {\n                fetch('http://storysight.ru/api/auth/login', {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                    },\n                    credentials: 'include',\n                    body: JSON.stringify(user),\n                })\n                    .then((res) => {\n                        if (!res.ok) throw new Error('Ошибка авторизации');\n                        return res.json();\n                    })\n                    .then(() => {\n                        setIsLoggedIn(true);\n                        setShowLoginModal(false);\n                    })\n                    .catch((err) => alert('Ошибка авторизации: ' + err.message));\n            },\n        };\n\n        const script = document.createElement('script');\n        script.src = 'https://telegram.org/js/telegram-widget.js?22';\n        script.setAttribute('data-telegram-login', 'zavod_worker_bot'); // без @\n        script.setAttribute('data-size', 'large');\n        script.setAttribute('data-userpic', 'false');\n        script.setAttribute('data-request-access', 'write');\n        script.setAttribute('data-onauth', 'TelegramLoginWidget.dataOnauth(user)');\n        script.async = true;\n\n        const container = document.getElementById('tg-login-button');\n        container.innerHTML = '';\n        container.appendChild(script);\n    }, [showLoginModal]);\n\n    return (\n        <div className=\"generate-container\" style={{ maxWidth: 600, margin: '30px auto', padding: 20 }}>\n            <h1 className=\"generate-title\" style={{ marginBottom: 20 }}>\n                Редактирование изображения (Image2Image с маской)\n            </h1>\n\n            <p style={{ fontSize: 14, color: '#555', marginBottom: 20 }}>\n                Загрузите изображение, выделите область для изменения, введите промпт и нажмите \"Начать генерацию\".\n            </p>\n\n            <textarea\n                className=\"generate-textarea\"\n                placeholder=\"Опишите, что хотите добавить или изменить...\"\n                value={prompt}\n                onChange={(e) => setPrompt(e.target.value)}\n                rows={3}\n                disabled={loading}\n            />\n\n            <div style={{ marginBottom: 20 }}>\n                <input\n                    type=\"file\"\n                    accept=\"image/*\"\n                    onChange={handleImageUpload}\n                    disabled={loading}\n                    style={{ marginBottom: 10 }}\n                />\n\n                {imageURL && (\n                    <div style={{ position: 'relative', border: '1px solid #ddd', borderRadius: 6 }}>\n                        <img\n                            ref={imgRef}\n                            src={imageURL}\n                            alt=\"Загруженное\"\n                            style={{ display: 'block', maxWidth: '100%', borderRadius: 6 }}\n                            onLoad={() => {\n                                if (imgRef.current && canvasRef.current) {\n                                    canvasRef.current.width = imgRef.current.width;\n                                    canvasRef.current.height = imgRef.current.height;\n                                }\n                                clearMask();\n                            }}\n                        />\n                        <canvas\n                            ref={canvasRef}\n                            style={{\n                                position: 'absolute',\n                                top: 0,\n                                left: 0,\n                                cursor: 'crosshair',\n                                borderRadius: 6,\n                                userSelect: 'none',\n                            }}\n                            onMouseDown={handleMouseDown}\n                            onMouseUp={handleMouseUp}\n                            onMouseLeave={handleMouseUp}\n                            onMouseMove={handleMouseMove}\n                        />\n                    </div>\n                )}\n            </div>\n\n            <div className=\"generate-nav\">\n                <button\n                    onClick={() => navigate(-1)}\n                    disabled={loading}\n                    className=\"generate-btn\"\n                    style={{ flex: 1, backgroundColor: '#fff', color: '#6b4c9a', border: '2px solid #b76aff' }}\n                >\n                    Назад\n                </button>\n\n                <button\n                    onClick={handleGenerateClick}\n                    disabled={loading}\n                    className=\"generate-btn\"\n                    style={{ flex: 2 }}\n                >\n                    {loading ? 'Генерация...' : 'Начать генерацию'}\n                </button>\n            </div>\n\n            {showLoginModal && (\n                <div\n                    style={{\n                        position: 'fixed',\n                        top: 0,\n                        left: 0,\n                        right: 0,\n                        bottom: 0,\n                        backgroundColor: 'rgba(0,0,0,0.5)',\n                        display: 'flex',\n                        justifyContent: 'center',\n                        alignItems: 'center',\n                        zIndex: 1000,\n                    }}\n                    onClick={() => setShowLoginModal(false)}\n                >\n                    <div\n                        onClick={(e) => e.stopPropagation()}\n                        style={{\n                            backgroundColor: 'white',\n                            padding: 20,\n                            borderRadius: 10,\n                            maxWidth: 400,\n                            width: '90%',\n                            textAlign: 'center',\n                            color: '#000'\n                        }}\n                    >\n                        <p>Для генерации нужно войти через Telegram</p>\n                        <div id=\"tg-login-button\" style={{ marginBottom: 10 }} />\n                        <button\n                            onClick={() => setShowLoginModal(false)}\n                            style={{\n                                padding: '6px 12px',\n                                borderRadius: 6,\n                                border: '1px solid #ccc',\n                                backgroundColor: 'white',\n                                cursor: 'pointer',\n                            }}\n                        >\n                            Отмена\n                        </button>\n                    </div>\n                </div>\n            )}\n        </div>\n    );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
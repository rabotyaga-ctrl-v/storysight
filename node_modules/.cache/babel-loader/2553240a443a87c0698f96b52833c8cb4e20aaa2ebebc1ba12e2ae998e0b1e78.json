{"ast":null,"code":"import React from'react';import{useLocation,useNavigate}from'react-router-dom';import'./ResultMain.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function ResultMain(){var _location$state,_location$state2,_location$state3;const location=useLocation();const navigate=useNavigate();const images=((_location$state=location.state)===null||_location$state===void 0?void 0:_location$state.images)||[];const storyline=((_location$state2=location.state)===null||_location$state2===void 0?void 0:_location$state2.storyline)||'';const prompts=((_location$state3=location.state)===null||_location$state3===void 0?void 0:_location$state3.prompts)||[];if(images.length===0){return/*#__PURE__*/_jsxs(\"div\",{className:\"result-empty\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u041D\\u0435\\u0442 \\u0438\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u0439 \\u0434\\u043B\\u044F \\u043E\\u0442\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u044F\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/'),children:\"\\u041D\\u0430 \\u0433\\u043B\\u0430\\u0432\\u043D\\u0443\\u044E\"})]});}const handleDownload=(url,index)=>{const link=document.createElement('a');link.href=url;link.download=\"comic_scene_\".concat(index+1,\".png\");document.body.appendChild(link);link.click();document.body.removeChild(link);};const handleSaveProject=async()=>{const projectData={storyline,prompts,images};try{const response=await fetch('http://localhost:8000/save-project',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(projectData)});if(!response.ok){throw new Error('Ошибка при сохранении проекта');}const result=await response.json();alert('Проект успешно сохранён!');console.log(result);}catch(error){console.error('Ошибка сохранения:',error);alert('Не удалось сохранить проект.');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"result-main-wrapper\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"title\",children:\"\\u0412\\u0430\\u0448 \\u043A\\u043E\\u043C\\u0438\\u043A\\u0441\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"story-block\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u0421\\u044E\\u0436\\u0435\\u0442\"}),/*#__PURE__*/_jsx(\"p\",{children:storyline})]}),/*#__PURE__*/_jsx(\"div\",{className:\"images-grid\",children:images.map((url,i)=>/*#__PURE__*/_jsxs(\"div\",{className:\"image-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"image-wrapper\",children:/*#__PURE__*/_jsx(\"img\",{src:url,alt:\"Scene \".concat(i+1)})}),/*#__PURE__*/_jsx(\"div\",{className:\"image-overlay\",children:prompts[i]}),/*#__PURE__*/_jsx(\"button\",{className:\"download-btn\",onClick:()=>handleDownload(url,i),children:\"\\u0421\\u043A\\u0430\\u0447\\u0430\\u0442\\u044C\"})]},i))}),/*#__PURE__*/_jsxs(\"div\",{className:\"buttons-row\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-home\",onClick:()=>navigate('/'),children:\"\\u041D\\u0430 \\u0433\\u043B\\u0430\\u0432\\u043D\\u0443\\u044E\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-home\",onClick:()=>navigate(-1),children:\"\\u041D\\u0430\\u0437\\u0430\\u0434\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-save\",onClick:handleSaveProject,children:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C \\u0432 \\u043F\\u0440\\u043E\\u0435\\u043A\\u0442\\u044B\"})]})]});}","map":{"version":3,"names":["React","useLocation","useNavigate","jsx","_jsx","jsxs","_jsxs","ResultMain","_location$state","_location$state2","_location$state3","location","navigate","images","state","storyline","prompts","length","className","children","onClick","handleDownload","url","index","link","document","createElement","href","download","concat","body","appendChild","click","removeChild","handleSaveProject","projectData","response","fetch","method","headers","JSON","stringify","ok","Error","result","json","alert","console","log","error","map","i","src","alt"],"sources":["C:/Users/rabot/WebstormProjects/storysight/src/pages/ResultMain.js"],"sourcesContent":["import React from 'react';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport './ResultMain.css';\r\n\r\nexport default function ResultMain() {\r\n    const location = useLocation();\r\n    const navigate = useNavigate();\r\n\r\n    const images = location.state?.images || [];\r\n    const storyline = location.state?.storyline || '';\r\n    const prompts = location.state?.prompts || [];\r\n\r\n    if (images.length === 0) {\r\n        return (\r\n            <div className=\"result-empty\">\r\n                <h2>Нет изображений для отображения</h2>\r\n                <button onClick={() => navigate('/')}>На главную</button>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const handleDownload = (url, index) => {\r\n        const link = document.createElement('a');\r\n        link.href = url;\r\n        link.download = `comic_scene_${index + 1}.png`;\r\n        document.body.appendChild(link);\r\n        link.click();\r\n        document.body.removeChild(link);\r\n    };\r\n\r\n    const handleSaveProject = async () => {\r\n        const projectData = { storyline, prompts, images };\r\n\r\n        try {\r\n            const response = await fetch('http://localhost:8000/save-project', {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                },\r\n                body: JSON.stringify(projectData)\r\n            });\r\n\r\n            if (!response.ok) {\r\n                throw new Error('Ошибка при сохранении проекта');\r\n            }\r\n\r\n            const result = await response.json();\r\n            alert('Проект успешно сохранён!');\r\n            console.log(result);\r\n        } catch (error) {\r\n            console.error('Ошибка сохранения:', error);\r\n            alert('Не удалось сохранить проект.');\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"result-main-wrapper\">\r\n            <h1 className=\"title\">Ваш комикс</h1>\r\n\r\n            <div className=\"story-block\">\r\n                <h2>Сюжет</h2>\r\n                <p>{storyline}</p>\r\n            </div>\r\n\r\n            <div className=\"images-grid\">\r\n                {images.map((url, i) => (\r\n                    <div key={i} className=\"image-card\">\r\n                        <div className=\"image-wrapper\">\r\n                            <img src={url} alt={`Scene ${i + 1}`} />\r\n                        </div>\r\n                        <div className=\"image-overlay\">{prompts[i]}</div>\r\n                        <button className=\"download-btn\" onClick={() => handleDownload(url, i)}>\r\n                            Скачать\r\n                        </button>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n\r\n            <div className=\"buttons-row\">\r\n                <button className=\"btn-home\" onClick={() => navigate('/')}>На главную</button>\r\n                <button className=\"btn-home\" onClick={() => navigate(-1)}>Назад</button>\r\n                <button className=\"btn-save\" onClick={handleSaveProject}>Сохранить в проекты</button>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{useNavigate}from'react-router-dom';import'./manual.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const stylesList=[{id:'photographic',name:'Фотография',img:'/images/photographic.png',tooltip:'Яркие цвета, упрощённые формы, динамичный мультяшный стиль.'},{id:'anime',name:'Аниме',img:'/images/anime.png',tooltip:'Стиль японской анимации с выразительными глазами и детализированными персонажами.'},{id:'comic-book',name:'Комикс',img:'/images/comic.png',tooltip:'Импрессионизм, мазки кисти и живописные текстуры как у Ван Гога.'}];export default function Manual(){const[style,setStyle]=useState(null);const[loading,setLoading]=useState(false);const[question1,setQuestion1]=useState('');const[question2,setQuestion2]=useState('');const[question3,setQuestion3]=useState('');const[numImages,setNumImages]=useState(4);const[isAuthorized,setIsAuthorized]=useState(null);const[showModal,setShowModal]=useState(false);const[errors,setErrors]=useState({});const modalRef=useRef(null);const navigate=useNavigate();// Проверка авторизации при загрузке\nuseEffect(()=>{fetch('http://storysight.ru/api/auth/me',{credentials:'include'}).then(res=>res.ok?res.json():Promise.reject()).then(()=>{setIsAuthorized(true);setShowModal(false);}).catch(()=>{setIsAuthorized(false);setShowModal(true);});},[]);// Обработчик Telegram авторизации\nuseEffect(()=>{window.onTelegramAuth=user=>{fetch('http://storysight.ru/api/auth/login',{method:'POST',headers:{'Content-Type':'application/json'},credentials:'include',body:JSON.stringify(user)}).then(res=>{if(res.ok){setIsAuthorized(true);setShowModal(false);}else{alert('Ошибка авторизации через Telegram');}}).catch(err=>{console.error('Auth error',err);alert('Ошибка авторизации через Telegram');});};return()=>{window.onTelegramAuth=null;};},[]);// Вставка Telegram-виджета\nuseEffect(()=>{if(showModal&&modalRef.current){modalRef.current.innerHTML='';const existingScript=document.querySelector('script[src=\"https://telegram.org/js/telegram-widget.js?22\"]');if(existingScript)existingScript.remove();const script=document.createElement('script');script.src='https://telegram.org/js/telegram-widget.js?22';script.async=true;script.setAttribute('data-telegram-login','zavod_worker_bot');script.setAttribute('data-size','large');script.setAttribute('data-userpic','false');script.setAttribute('data-onauth','onTelegramAuth(user)');script.setAttribute('data-request-access','write');modalRef.current.appendChild(script);}},[showModal]);const validate=()=>{const newErrors={};if(!style)newErrors.style='Выберите стиль';if(!question1.trim())newErrors.question1='Это поле обязательно';if(!question2.trim())newErrors.question2='Это поле обязательно';if(!question3.trim())newErrors.question3='Это поле обязательно';setErrors(newErrors);return Object.keys(newErrors).length===0;};const handleGenerate=async()=>{if(!validate())return;setLoading(true);try{const res=await fetch('http://storysight.ru/api/generate-manual',{method:'POST',headers:{'Content-Type':'application/json'},credentials:'include',body:JSON.stringify({style,question1,question2,question3,num_images:numImages})});const data=await res.json();if(res.ok){const images=data.images.map(img=>\"data:image/webp;base64,\".concat(img));navigate('/result-main',{state:{images,storyline:data.storyline,prompts:data.prompts}});}else{alert(data.error||'Ошибка при генерации');}}catch(err){console.error(err);alert('Ошибка соединения');}finally{setLoading(false);}};if(isAuthorized===null)return/*#__PURE__*/_jsx(\"div\",{className:\"manual-container\",children:\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430...\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"manual-container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"manual-title\",children:\"\\u0420\\u0443\\u0447\\u043D\\u043E\\u0439 \\u0432\\u0432\\u043E\\u0434 \\u0438\\u0434\\u0435\\u0438\"}),/*#__PURE__*/_jsx(\"label\",{className:\"manual-label\",children:\"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0441\\u0442\\u0438\\u043B\\u044C:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"styles-grid\",children:stylesList.map(_ref=>{let{id,name,img,tooltip}=_ref;return/*#__PURE__*/_jsx(\"div\",{className:\"style-box flip-card \".concat(style===id?'selected':''),onClick:()=>setStyle(id),title:tooltip,children:/*#__PURE__*/_jsxs(\"div\",{className:\"flip-card-inner\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flip-card-front\",children:[/*#__PURE__*/_jsx(\"img\",{src:img,alt:name,className:\"style-image\"}),/*#__PURE__*/_jsx(\"div\",{className:\"style-name\",children:name})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flip-card-back\",children:/*#__PURE__*/_jsx(\"p\",{className:\"style-description\",children:tooltip})})]})},id);})}),errors.style&&/*#__PURE__*/_jsx(\"div\",{className:\"error-text\",children:errors.style}),/*#__PURE__*/_jsxs(\"div\",{className:\"manual-questions\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"manual-label\",children:\"1. \\u041A\\u0430\\u043A\\u0438\\u043C \\u0432\\u044B \\u0432\\u0438\\u0434\\u0438\\u0442\\u0435 \\u0441\\u0432\\u043E\\u0435\\u0433\\u043E \\u043F\\u0435\\u0440\\u0441\\u043E\\u043D\\u0430\\u0436\\u0430?\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"manual-textarea\",value:question1,onChange:e=>setQuestion1(e.target.value)}),errors.question1&&/*#__PURE__*/_jsx(\"div\",{className:\"error-text\",children:errors.question1}),/*#__PURE__*/_jsx(\"label\",{className:\"manual-label\",children:\"2. \\u0427\\u0435\\u043C \\u0432\\u044B \\u0437\\u0430\\u043D\\u0438\\u043C\\u0430\\u0435\\u0442\\u0435\\u0441\\u044C \\u0438\\u043B\\u0438 \\u043A\\u0430\\u043A\\u043E\\u0439 \\u043F\\u0440\\u043E\\u0434\\u0443\\u043A\\u0442/\\u0442\\u043E\\u0432\\u0430\\u0440 \\u0441\\u043E\\u0437\\u0434\\u0430\\u0451\\u0442\\u0435?\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"manual-textarea\",value:question2,onChange:e=>setQuestion2(e.target.value)}),errors.question2&&/*#__PURE__*/_jsx(\"div\",{className:\"error-text\",children:errors.question2}),/*#__PURE__*/_jsx(\"label\",{className:\"manual-label\",children:\"3. \\u041A\\u0440\\u0430\\u0442\\u043A\\u043E \\u043E\\u043F\\u0438\\u0448\\u0438\\u0442\\u0435 \\u0441\\u044E\\u0436\\u0435\\u0442 \\u0432\\u0430\\u0448\\u0435\\u0439 \\u0438\\u0441\\u0442\\u043E\\u0440\\u0438\\u0438\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"manual-textarea\",value:question3,onChange:e=>setQuestion3(e.target.value)}),errors.question3&&/*#__PURE__*/_jsx(\"div\",{className:\"error-text\",children:errors.question3})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"manual-slider-block\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"manual-label\",children:[\"\\u041A\\u043E\\u043B\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E \\u0438\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u0439: \",numImages]}),/*#__PURE__*/_jsx(\"input\",{type:\"range\",min:1,max:8,value:numImages,onChange:e=>setNumImages(Number(e.target.value)),className:\"manual-slider\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"button-row\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-gray\",onClick:()=>navigate('/create-choice'),children:\"\\u041D\\u0430\\u0437\\u0430\\u0434\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-purple\",onClick:handleGenerate,disabled:loading,children:loading?'Генерация...':'Сгенерировать'})]}),showModal&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:()=>setShowModal(false),children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal\",onClick:e=>e.stopPropagation(),role:\"dialog\",\"aria-modal\":\"true\",\"aria-labelledby\":\"modal-title\",children:[/*#__PURE__*/_jsx(\"h2\",{id:\"modal-title\",children:\"\\u0412\\u0445\\u043E\\u0434 \\u0447\\u0435\\u0440\\u0435\\u0437 Telegram\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u041F\\u043E\\u0436\\u0430\\u043B\\u0443\\u0439\\u0441\\u0442\\u0430, \\u0432\\u043E\\u0439\\u0434\\u0438\\u0442\\u0435, \\u0447\\u0442\\u043E\\u0431\\u044B \\u043F\\u0440\\u043E\\u0434\\u043E\\u043B\\u0436\\u0438\\u0442\\u044C\"}),/*#__PURE__*/_jsx(\"div\",{ref:modalRef}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-gray\",onClick:()=>setShowModal(false),children:\"\\u0417\\u0430\\u043A\\u0440\\u044B\\u0442\\u044C\"})]})})]});}","map":{"version":3,"names":["React","useState","useEffect","useRef","useNavigate","jsx","_jsx","jsxs","_jsxs","stylesList","id","name","img","tooltip","Manual","style","setStyle","loading","setLoading","question1","setQuestion1","question2","setQuestion2","question3","setQuestion3","numImages","setNumImages","isAuthorized","setIsAuthorized","showModal","setShowModal","errors","setErrors","modalRef","navigate","fetch","credentials","then","res","ok","json","Promise","reject","catch","window","onTelegramAuth","user","method","headers","body","JSON","stringify","alert","err","console","error","current","innerHTML","existingScript","document","querySelector","remove","script","createElement","src","async","setAttribute","appendChild","validate","newErrors","trim","Object","keys","length","handleGenerate","num_images","data","images","map","concat","state","storyline","prompts","className","children","_ref","onClick","title","alt","value","onChange","e","target","type","min","max","Number","disabled","stopPropagation","role","ref"],"sources":["/var/www/storysight/src/pages/manual.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport './manual.css';\n\nconst stylesList = [\n  { id: 'photographic', name: 'Фотография', img: '/images/photographic.png', tooltip: 'Яркие цвета, упрощённые формы, динамичный мультяшный стиль.' },\n  { id: 'anime', name: 'Аниме', img: '/images/anime.png', tooltip: 'Стиль японской анимации с выразительными глазами и детализированными персонажами.' },\n  { id: 'comic-book', name: 'Комикс', img: '/images/comic.png', tooltip: 'Импрессионизм, мазки кисти и живописные текстуры как у Ван Гога.' },\n];\n\nexport default function Manual() {\n  const [style, setStyle] = useState(null);\n  const [loading, setLoading] = useState(false);\n\n  const [question1, setQuestion1] = useState('');\n  const [question2, setQuestion2] = useState('');\n  const [question3, setQuestion3] = useState('');\n  const [numImages, setNumImages] = useState(4);\n\n  const [isAuthorized, setIsAuthorized] = useState(null);\n  const [showModal, setShowModal] = useState(false);\n\n  const [errors, setErrors] = useState({});\n\n  const modalRef = useRef(null);\n  const navigate = useNavigate();\n\n  // Проверка авторизации при загрузке\n  useEffect(() => {\n    fetch('http://storysight.ru/api/auth/me', {\n      credentials: 'include',\n    })\n      .then(res => res.ok ? res.json() : Promise.reject())\n      .then(() => {\n        setIsAuthorized(true);\n        setShowModal(false);\n      })\n      .catch(() => {\n        setIsAuthorized(false);\n        setShowModal(true);\n      });\n  }, []);\n\n  // Обработчик Telegram авторизации\n  useEffect(() => {\n    window.onTelegramAuth = (user) => {\n      fetch('http://storysight.ru/api/auth/login', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        credentials: 'include',\n        body: JSON.stringify(user),\n      })\n        .then(res => {\n          if (res.ok) {\n            setIsAuthorized(true);\n            setShowModal(false);\n          } else {\n            alert('Ошибка авторизации через Telegram');\n          }\n        })\n        .catch((err) => {\n          console.error('Auth error', err);\n          alert('Ошибка авторизации через Telegram');\n        });\n    };\n\n    return () => {\n      window.onTelegramAuth = null;\n    };\n  }, []);\n\n  // Вставка Telegram-виджета\n  useEffect(() => {\n    if (showModal && modalRef.current) {\n      modalRef.current.innerHTML = '';\n\n      const existingScript = document.querySelector('script[src=\"https://telegram.org/js/telegram-widget.js?22\"]');\n      if (existingScript) existingScript.remove();\n\n      const script = document.createElement('script');\n      script.src = 'https://telegram.org/js/telegram-widget.js?22';\n      script.async = true;\n      script.setAttribute('data-telegram-login', 'zavod_worker_bot');\n      script.setAttribute('data-size', 'large');\n      script.setAttribute('data-userpic', 'false');\n      script.setAttribute('data-onauth', 'onTelegramAuth(user)');\n      script.setAttribute('data-request-access', 'write');\n\n      modalRef.current.appendChild(script);\n    }\n  }, [showModal]);\n\n  const validate = () => {\n    const newErrors = {};\n    if (!style) newErrors.style = 'Выберите стиль';\n    if (!question1.trim()) newErrors.question1 = 'Это поле обязательно';\n    if (!question2.trim()) newErrors.question2 = 'Это поле обязательно';\n    if (!question3.trim()) newErrors.question3 = 'Это поле обязательно';\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleGenerate = async () => {\n    if (!validate()) return;\n    setLoading(true);\n\n    try {\n      const res = await fetch('http://storysight.ru/api/generate-manual', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        credentials: 'include',\n        body: JSON.stringify({\n          style,\n          question1,\n          question2,\n          question3,\n          num_images: numImages,\n        }),\n      });\n\n      const data = await res.json();\n\n      if (res.ok) {\n        const images = data.images.map(img => `data:image/webp;base64,${img}`);\n        navigate('/result-main', {\n          state: {\n            images,\n            storyline: data.storyline,\n            prompts: data.prompts,\n          },\n        });\n      } else {\n        alert(data.error || 'Ошибка при генерации');\n      }\n    } catch (err) {\n      console.error(err);\n      alert('Ошибка соединения');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (isAuthorized === null) return <div className=\"manual-container\">Загрузка...</div>;\n\n  return (\n    <div className=\"manual-container\">\n      <h1 className=\"manual-title\">Ручной ввод идеи</h1>\n\n      <label className=\"manual-label\">Выберите стиль:</label>\n      <div className=\"styles-grid\">\n        {stylesList.map(({ id, name, img, tooltip }) => (\n          <div\n            key={id}\n            className={`style-box flip-card ${style === id ? 'selected' : ''}`}\n            onClick={() => setStyle(id)}\n            title={tooltip}\n          >\n            <div className=\"flip-card-inner\">\n              <div className=\"flip-card-front\">\n                <img src={img} alt={name} className=\"style-image\" />\n                <div className=\"style-name\">{name}</div>\n              </div>\n              <div className=\"flip-card-back\">\n                <p className=\"style-description\">{tooltip}</p>\n              </div>\n            </div>\n          </div>\n        ))}\n      </div>\n      {errors.style && <div className=\"error-text\">{errors.style}</div>}\n\n      <div className=\"manual-questions\">\n        <label className=\"manual-label\">1. Каким вы видите своего персонажа?</label>\n        <textarea\n          className=\"manual-textarea\"\n          value={question1}\n          onChange={(e) => setQuestion1(e.target.value)}\n        />\n        {errors.question1 && <div className=\"error-text\">{errors.question1}</div>}\n\n        <label className=\"manual-label\">2. Чем вы занимаетесь или какой продукт/товар создаёте?</label>\n        <textarea\n          className=\"manual-textarea\"\n          value={question2}\n          onChange={(e) => setQuestion2(e.target.value)}\n        />\n        {errors.question2 && <div className=\"error-text\">{errors.question2}</div>}\n\n        <label className=\"manual-label\">3. Кратко опишите сюжет вашей истории</label>\n        <textarea\n          className=\"manual-textarea\"\n          value={question3}\n          onChange={(e) => setQuestion3(e.target.value)}\n        />\n        {errors.question3 && <div className=\"error-text\">{errors.question3}</div>}\n      </div>\n\n      <div className=\"manual-slider-block\">\n        <label className=\"manual-label\">\n          Количество изображений: {numImages}\n        </label>\n        <input\n          type=\"range\"\n          min={1}\n          max={8}\n          value={numImages}\n          onChange={(e) => setNumImages(Number(e.target.value))}\n          className=\"manual-slider\"\n        />\n      </div>\n\n      <div className=\"button-row\">\n        <button className=\"btn btn-gray\" onClick={() => navigate('/create-choice')}>\n          Назад\n        </button>\n        <button\n          className=\"btn btn-purple\"\n          onClick={handleGenerate}\n          disabled={loading}\n        >\n          {loading ? 'Генерация...' : 'Сгенерировать'}\n        </button>\n      </div>\n\n      {showModal && (\n        <div className=\"modal-overlay\" onClick={() => setShowModal(false)}>\n          <div\n            className=\"modal\"\n            onClick={(e) => e.stopPropagation()}\n            role=\"dialog\"\n            aria-modal=\"true\"\n            aria-labelledby=\"modal-title\"\n          >\n            <h2 id=\"modal-title\">Вход через Telegram</h2>\n            <p>Пожалуйста, войдите, чтобы продолжить</p>\n            <div ref={modalRef} />\n            <button className=\"btn btn-gray\" onClick={() => setShowModal(false)}>\n              Закрыть\n            </button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
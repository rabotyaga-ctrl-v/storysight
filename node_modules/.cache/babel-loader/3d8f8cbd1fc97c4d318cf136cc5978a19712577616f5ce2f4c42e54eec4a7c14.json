{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\rabot\\\\WebstormProjects\\\\storysight\\\\src\\\\pages\\\\GenerateCharacter.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport './Generate.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function GenerateCharacter() {\n  _s();\n  const navigate = useNavigate();\n  const [prompt, setPrompt] = useState('');\n  const [imageFile, setImageFile] = useState(null);\n  const [imageURL, setImageURL] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [, setResultImage] = useState(null); // для результата\n\n  const canvasRef = useRef(null);\n  const imgRef = useRef(null);\n  const [isDrawing, setIsDrawing] = useState(false);\n  const [lastPos, setLastPos] = useState({\n    x: 0,\n    y: 0\n  });\n  const handleImageUpload = e => {\n    const file = e.target.files[0];\n    if (!file) return;\n    setImageFile(file);\n    const url = URL.createObjectURL(file);\n    setImageURL(url);\n    setResultImage(null); // сброс результата при новом файле\n  };\n  const handleMouseDown = e => {\n    if (!canvasRef.current) return;\n    setIsDrawing(true);\n    const rect = canvasRef.current.getBoundingClientRect();\n    setLastPos({\n      x: e.clientX - rect.left,\n      y: e.clientY - rect.top\n    });\n  };\n  const handleMouseUp = () => {\n    setIsDrawing(false);\n  };\n  const handleMouseMove = e => {\n    if (!isDrawing || !canvasRef.current) return;\n    const ctx = canvasRef.current.getContext('2d');\n    const rect = canvasRef.current.getBoundingClientRect();\n    const currentX = e.clientX - rect.left;\n    const currentY = e.clientY - rect.top;\n    ctx.strokeStyle = 'white'; // белая кисть\n    ctx.lineWidth = 20;\n    ctx.lineCap = 'round';\n    ctx.globalAlpha = 1.0; // полностью непрозрачная кисть\n\n    ctx.beginPath();\n    ctx.moveTo(lastPos.x, lastPos.y);\n    ctx.lineTo(currentX, currentY);\n    ctx.stroke();\n    setLastPos({\n      x: currentX,\n      y: currentY\n    });\n  };\n  const clearMask = () => {\n    if (!canvasRef.current) return;\n    const ctx = canvasRef.current.getContext('2d');\n    ctx.clearRect(0, 0, canvasRef.current.width, canvasRef.current.height);\n  };\n  useEffect(() => {\n    clearMask();\n    setResultImage(null);\n  }, [imageURL]);\n  const handleGenerateClick = async () => {\n    if (!prompt.trim()) {\n      alert('Пожалуйста, введите промпт.');\n      return;\n    }\n    if (!imageFile) {\n      alert('Пожалуйста, загрузите изображение.');\n      return;\n    }\n    setLoading(true);\n    try {\n      const formData = new FormData();\n      formData.append('prompt', prompt);\n      formData.append('character_name', 'MyCharacter'); // обязательно!\n      formData.append('init_image', imageFile);\n\n      // Получаем blob маски из canvas (формат PNG)\n      const maskBlob = await new Promise(resolve => canvasRef.current.toBlob(resolve, 'image/png'));\n      formData.append('mask_image', maskBlob);\n      const response = await fetch('http://localhost:8000/edit-character', {\n        // полный адрес\n        method: 'POST',\n        body: formData\n      });\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.detail || 'Ошибка на сервере');\n      }\n      const data = await response.json();\n      navigate('/result-main', {\n        state: {\n          images: [`data:image/png;base64,${data.images[0]}`],\n          // оборачиваем в массив\n          prompts: [prompt],\n          // тоже массив\n          storyline: '' // можно оставить пустым, если не используется\n        }\n      });\n    } catch (error) {\n      alert('Ошибка генерации: ' + error.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"generate-container\",\n    style: {\n      maxWidth: 600,\n      margin: '30px auto',\n      padding: 20\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      style: {\n        textAlign: 'center',\n        marginBottom: 20\n      },\n      children: \"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u0438\\u0435 \\u0438\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u044F (Image2Image \\u0441 \\u043C\\u0430\\u0441\\u043A\\u043E\\u0439)\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        fontSize: 14,\n        color: '#555',\n        marginBottom: 20\n      },\n      children: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u0435 \\u0432\\u0430\\u0448\\u0435 \\u0438\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u0435, \\u0432\\u044B\\u0434\\u0435\\u043B\\u0438\\u0442\\u0435 \\u043A\\u0438\\u0441\\u0442\\u043E\\u0447\\u043A\\u043E\\u0439 \\u043E\\u0431\\u043B\\u0430\\u0441\\u0442\\u044C \\u0434\\u043B\\u044F \\u0438\\u0437\\u043C\\u0435\\u043D\\u0435\\u043D\\u0438\\u044F, \\u0432\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043F\\u0440\\u043E\\u043C\\u043F\\u0442 \\u0438 \\u043D\\u0430\\u0436\\u043C\\u0438\\u0442\\u0435 \\\"\\u041D\\u0430\\u0447\\u0430\\u0442\\u044C \\u0433\\u0435\\u043D\\u0435\\u0440\\u0430\\u0446\\u0438\\u044E\\\".\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n      placeholder: \"\\u041E\\u043F\\u0438\\u0448\\u0438\\u0442\\u0435, \\u0447\\u0442\\u043E \\u0445\\u043E\\u0442\\u0438\\u0442\\u0435 \\u0434\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0438\\u043B\\u0438 \\u0438\\u0437\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C...\",\n      value: prompt,\n      onChange: e => setPrompt(e.target.value),\n      rows: 3,\n      style: {\n        width: '100%',\n        padding: 10,\n        fontSize: 16,\n        borderRadius: 6,\n        border: '1px solid #ccc',\n        marginBottom: 20,\n        resize: 'none',\n        fontFamily: 'Arial, sans-serif'\n      },\n      disabled: loading\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: 20\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        accept: \"image/*\",\n        onChange: handleImageUpload,\n        disabled: loading,\n        style: {\n          marginBottom: 10\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 17\n      }, this), imageURL && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          position: 'relative',\n          border: '1px solid #ddd',\n          borderRadius: 6\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          ref: imgRef,\n          src: imageURL,\n          alt: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0436\\u0435\\u043D\\u043D\\u043E\\u0435\",\n          style: {\n            display: 'block',\n            maxWidth: '100%',\n            borderRadius: 6\n          },\n          onLoad: () => {\n            if (imgRef.current && canvasRef.current) {\n              canvasRef.current.width = imgRef.current.width;\n              canvasRef.current.height = imgRef.current.height;\n            }\n            clearMask();\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n          ref: canvasRef,\n          style: {\n            position: 'absolute',\n            top: 0,\n            left: 0,\n            cursor: 'crosshair',\n            borderRadius: 6,\n            userSelect: 'none'\n          },\n          onMouseDown: handleMouseDown,\n          onMouseUp: handleMouseUp,\n          onMouseLeave: handleMouseUp,\n          onMouseMove: handleMouseMove\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        justifyContent: 'space-between',\n        gap: 10\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => navigate(-1),\n        disabled: loading,\n        style: {\n          flex: 1,\n          padding: '10px 0',\n          borderRadius: 6,\n          border: '1px solid #ccc',\n          background: '#fff',\n          cursor: 'pointer',\n          fontWeight: 'bold'\n        },\n        children: \"\\u041D\\u0430\\u0437\\u0430\\u0434\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleGenerateClick,\n        disabled: loading,\n        style: {\n          flex: 2,\n          padding: '10px 0',\n          borderRadius: 6,\n          border: 'none',\n          background: '#6c63ff',\n          color: 'white',\n          fontWeight: 'bold',\n          cursor: 'pointer'\n        },\n        children: loading ? 'Генерация...' : 'Начать генерацию'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 125,\n    columnNumber: 9\n  }, this);\n}\n_s(GenerateCharacter, \"alEDuVBhS82LR1KiYqIph3jx+5M=\", false, function () {\n  return [useNavigate];\n});\n_c = GenerateCharacter;\nvar _c;\n$RefreshReg$(_c, \"GenerateCharacter\");","map":{"version":3,"names":["React","useState","useRef","useEffect","useNavigate","jsxDEV","_jsxDEV","GenerateCharacter","_s","navigate","prompt","setPrompt","imageFile","setImageFile","imageURL","setImageURL","loading","setLoading","setResultImage","canvasRef","imgRef","isDrawing","setIsDrawing","lastPos","setLastPos","x","y","handleImageUpload","e","file","target","files","url","URL","createObjectURL","handleMouseDown","current","rect","getBoundingClientRect","clientX","left","clientY","top","handleMouseUp","handleMouseMove","ctx","getContext","currentX","currentY","strokeStyle","lineWidth","lineCap","globalAlpha","beginPath","moveTo","lineTo","stroke","clearMask","clearRect","width","height","handleGenerateClick","trim","alert","formData","FormData","append","maskBlob","Promise","resolve","toBlob","response","fetch","method","body","ok","errorData","json","Error","detail","data","state","images","prompts","storyline","error","message","className","style","maxWidth","margin","padding","children","textAlign","marginBottom","fileName","_jsxFileName","lineNumber","columnNumber","fontSize","color","placeholder","value","onChange","rows","borderRadius","border","resize","fontFamily","disabled","type","accept","position","ref","src","alt","display","onLoad","cursor","userSelect","onMouseDown","onMouseUp","onMouseLeave","onMouseMove","justifyContent","gap","onClick","flex","background","fontWeight","_c","$RefreshReg$"],"sources":["C:/Users/rabot/WebstormProjects/storysight/src/pages/GenerateCharacter.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport './Generate.css';\r\n\r\nexport default function GenerateCharacter() {\r\n    const navigate = useNavigate();\r\n\r\n    const [prompt, setPrompt] = useState('');\r\n    const [imageFile, setImageFile] = useState(null);\r\n    const [imageURL, setImageURL] = useState(null);\r\n    const [loading, setLoading] = useState(false);\r\n    const [, setResultImage] = useState(null); // для результата\r\n\r\n    const canvasRef = useRef(null);\r\n    const imgRef = useRef(null);\r\n    const [isDrawing, setIsDrawing] = useState(false);\r\n    const [lastPos, setLastPos] = useState({ x: 0, y: 0 });\r\n\r\n    const handleImageUpload = (e) => {\r\n        const file = e.target.files[0];\r\n        if (!file) return;\r\n        setImageFile(file);\r\n        const url = URL.createObjectURL(file);\r\n        setImageURL(url);\r\n        setResultImage(null); // сброс результата при новом файле\r\n    };\r\n\r\n    const handleMouseDown = (e) => {\r\n        if (!canvasRef.current) return;\r\n        setIsDrawing(true);\r\n        const rect = canvasRef.current.getBoundingClientRect();\r\n        setLastPos({ x: e.clientX - rect.left, y: e.clientY - rect.top });\r\n    };\r\n\r\n    const handleMouseUp = () => {\r\n        setIsDrawing(false);\r\n    };\r\n\r\n    const handleMouseMove = (e) => {\r\n        if (!isDrawing || !canvasRef.current) return;\r\n        const ctx = canvasRef.current.getContext('2d');\r\n        const rect = canvasRef.current.getBoundingClientRect();\r\n        const currentX = e.clientX - rect.left;\r\n        const currentY = e.clientY - rect.top;\r\n\r\n        ctx.strokeStyle = 'white';  // белая кисть\r\n        ctx.lineWidth = 20;\r\n        ctx.lineCap = 'round';\r\n        ctx.globalAlpha = 1.0; // полностью непрозрачная кисть\r\n\r\n        ctx.beginPath();\r\n        ctx.moveTo(lastPos.x, lastPos.y);\r\n        ctx.lineTo(currentX, currentY);\r\n        ctx.stroke();\r\n\r\n        setLastPos({ x: currentX, y: currentY });\r\n    };\r\n\r\n\r\n    const clearMask = () => {\r\n        if (!canvasRef.current) return;\r\n        const ctx = canvasRef.current.getContext('2d');\r\n        ctx.clearRect(0, 0, canvasRef.current.width, canvasRef.current.height);\r\n    };\r\n\r\n    useEffect(() => {\r\n        clearMask();\r\n        setResultImage(null);\r\n    }, [imageURL]);\r\n\r\n    const handleGenerateClick = async () => {\r\n        if (!prompt.trim()) {\r\n            alert('Пожалуйста, введите промпт.');\r\n            return;\r\n        }\r\n        if (!imageFile) {\r\n            alert('Пожалуйста, загрузите изображение.');\r\n            return;\r\n        }\r\n\r\n        setLoading(true);\r\n\r\n        try {\r\n            const formData = new FormData();\r\n            formData.append('prompt', prompt);\r\n            formData.append('character_name', 'MyCharacter'); // обязательно!\r\n            formData.append('init_image', imageFile);\r\n\r\n            // Получаем blob маски из canvas (формат PNG)\r\n            const maskBlob = await new Promise((resolve) =>\r\n                canvasRef.current.toBlob(resolve, 'image/png')\r\n            );\r\n            formData.append('mask_image', maskBlob);\r\n\r\n            const response = await fetch('http://localhost:8000/edit-character', { // полный адрес\r\n                method: 'POST',\r\n                body: formData,\r\n            });\r\n\r\n            if (!response.ok) {\r\n                const errorData = await response.json();\r\n                throw new Error(errorData.detail || 'Ошибка на сервере');\r\n            }\r\n\r\n            const data = await response.json();\r\n\r\n            navigate('/result-main', {\r\n                state: {\r\n                    images: [`data:image/png;base64,${data.images[0]}`], // оборачиваем в массив\r\n                    prompts: [prompt], // тоже массив\r\n                    storyline: '', // можно оставить пустым, если не используется\r\n                },\r\n            });\r\n\r\n\r\n        } catch (error) {\r\n            alert('Ошибка генерации: ' + error.message);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n\r\n    return (\r\n        <div className=\"generate-container\" style={{ maxWidth: 600, margin: '30px auto', padding: 20 }}>\r\n            <h1 style={{ textAlign: 'center', marginBottom: 20 }}>\r\n                Редактирование изображения (Image2Image с маской)\r\n            </h1>\r\n\r\n            <p style={{ fontSize: 14, color: '#555', marginBottom: 20 }}>\r\n                Загрузите ваше изображение, выделите кисточкой область для изменения, введите промпт и нажмите\r\n                \"Начать генерацию\".\r\n            </p>\r\n\r\n            <textarea\r\n                placeholder=\"Опишите, что хотите добавить или изменить...\"\r\n                value={prompt}\r\n                onChange={(e) => setPrompt(e.target.value)}\r\n                rows={3}\r\n                style={{\r\n                    width: '100%',\r\n                    padding: 10,\r\n                    fontSize: 16,\r\n                    borderRadius: 6,\r\n                    border: '1px solid #ccc',\r\n                    marginBottom: 20,\r\n                    resize: 'none',\r\n                    fontFamily: 'Arial, sans-serif',\r\n                }}\r\n                disabled={loading}\r\n            />\r\n\r\n            <div style={{ marginBottom: 20 }}>\r\n                <input\r\n                    type=\"file\"\r\n                    accept=\"image/*\"\r\n                    onChange={handleImageUpload}\r\n                    disabled={loading}\r\n                    style={{ marginBottom: 10 }}\r\n                />\r\n\r\n                {imageURL && (\r\n                    <div style={{ position: 'relative', border: '1px solid #ddd', borderRadius: 6 }}>\r\n                        <img\r\n                            ref={imgRef}\r\n                            src={imageURL}\r\n                            alt=\"Загруженное\"\r\n                            style={{ display: 'block', maxWidth: '100%', borderRadius: 6 }}\r\n                            onLoad={() => {\r\n                                if (imgRef.current && canvasRef.current) {\r\n                                    canvasRef.current.width = imgRef.current.width;\r\n                                    canvasRef.current.height = imgRef.current.height;\r\n                                }\r\n                                clearMask();\r\n                            }}\r\n                        />\r\n                        <canvas\r\n                            ref={canvasRef}\r\n                            style={{\r\n                                position: 'absolute',\r\n                                top: 0,\r\n                                left: 0,\r\n                                cursor: 'crosshair',\r\n                                borderRadius: 6,\r\n                                userSelect: 'none',\r\n                            }}\r\n                            onMouseDown={handleMouseDown}\r\n                            onMouseUp={handleMouseUp}\r\n                            onMouseLeave={handleMouseUp}\r\n                            onMouseMove={handleMouseMove}\r\n                        />\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            <div style={{ display: 'flex', justifyContent: 'space-between', gap: 10 }}>\r\n                <button\r\n                    onClick={() => navigate(-1)}\r\n                    disabled={loading}\r\n                    style={{\r\n                        flex: 1,\r\n                        padding: '10px 0',\r\n                        borderRadius: 6,\r\n                        border: '1px solid #ccc',\r\n                        background: '#fff',\r\n                        cursor: 'pointer',\r\n                        fontWeight: 'bold',\r\n                    }}\r\n                >\r\n                    Назад\r\n                </button>\r\n\r\n                <button\r\n                    onClick={handleGenerateClick}\r\n                    disabled={loading}\r\n                    style={{\r\n                        flex: 2,\r\n                        padding: '10px 0',\r\n                        borderRadius: 6,\r\n                        border: 'none',\r\n                        background: '#6c63ff',\r\n                        color: 'white',\r\n                        fontWeight: 'bold',\r\n                        cursor: 'pointer',\r\n                    }}\r\n                >\r\n                    {loading ? 'Генерация...' : 'Начать генерацию'}\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
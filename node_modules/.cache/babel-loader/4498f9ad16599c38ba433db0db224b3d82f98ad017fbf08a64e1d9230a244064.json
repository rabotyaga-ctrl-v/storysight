{"ast":null,"code":"// GenerateCharacter.js\nimport React,{useState,useRef,useEffect}from'react';import{useNavigate}from'react-router-dom';import'./Generate.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function GenerateCharacter(){const navigate=useNavigate();const[prompt,setPrompt]=useState('');const[imageFile,setImageFile]=useState(null);const[imageURL,setImageURL]=useState(null);const[loading,setLoading]=useState(false);const[isLoggedIn,setIsLoggedIn]=useState(null);const[showLoginModal,setShowLoginModal]=useState(false);const canvasRef=useRef(null);const imgRef=useRef(null);const[isDrawing,setIsDrawing]=useState(false);const[lastPos,setLastPos]=useState({x:0,y:0});useEffect(()=>{fetch('http://storysight.ru/api/auth/me',{credentials:'include'}).then(res=>res.ok?res.json():Promise.reject()).then(()=>setIsLoggedIn(true)).catch(()=>setIsLoggedIn(false));},[]);const handleImageUpload=e=>{const file=e.target.files[0];if(!file)return;setImageFile(file);const url=URL.createObjectURL(file);setImageURL(url);};const handleMouseDown=e=>{if(!canvasRef.current)return;setIsDrawing(true);const rect=canvasRef.current.getBoundingClientRect();setLastPos({x:e.clientX-rect.left,y:e.clientY-rect.top});};const handleMouseUp=()=>setIsDrawing(false);const handleMouseMove=e=>{if(!isDrawing||!canvasRef.current)return;const ctx=canvasRef.current.getContext('2d');const rect=canvasRef.current.getBoundingClientRect();const x=e.clientX-rect.left;const y=e.clientY-rect.top;ctx.strokeStyle='white';ctx.lineWidth=20;ctx.lineCap='round';ctx.beginPath();ctx.moveTo(lastPos.x,lastPos.y);ctx.lineTo(x,y);ctx.stroke();setLastPos({x,y});};const clearMask=()=>{if(canvasRef.current){const ctx=canvasRef.current.getContext('2d');ctx.clearRect(0,0,canvasRef.current.width,canvasRef.current.height);}};useEffect(()=>{clearMask();},[imageURL]);const handleGenerateClick=async()=>{if(!isLoggedIn){setShowLoginModal(true);return;}if(!prompt.trim())return alert('Введите промпт.');if(!imageFile)return alert('Загрузите изображение.');setLoading(true);try{const formData=new FormData();formData.append('prompt',prompt);formData.append('character_name','MyCharacter');formData.append('init_image',imageFile);const maskBlob=await new Promise(resolve=>canvasRef.current.toBlob(resolve,'image/png'));formData.append('mask_image',maskBlob);const res=await fetch('http://storysight.ru/api/edit-character',{method:'POST',body:formData});if(!res.ok)throw new Error((await res.json()).detail||'Ошибка на сервере');const data=await res.json();navigate('/result-main',{state:{images:[\"data:image/png;base64,\".concat(data.images[0])],prompts:[prompt],storyline:'Изменено в редакторе'}});}catch(err){alert('Ошибка: '+err.message);}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"generate-container\",style:{maxWidth:600,margin:'30px auto',padding:20},children:[/*#__PURE__*/_jsx(\"h1\",{style:{textAlign:'center',marginBottom:20},children:\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u0438\\u0435 \\u0438\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u044F\"}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:14,color:'#555',marginBottom:20},children:\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u0435 \\u0438\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u0435, \\u0432\\u044B\\u0434\\u0435\\u043B\\u0438\\u0442\\u0435 \\u043E\\u0431\\u043B\\u0430\\u0441\\u0442\\u044C \\u0434\\u043B\\u044F \\u0438\\u0437\\u043C\\u0435\\u043D\\u0435\\u043D\\u0438\\u044F, \\u0432\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043F\\u0440\\u043E\\u043C\\u043F\\u0442 \\u0438 \\u043D\\u0430\\u0436\\u043C\\u0438\\u0442\\u0435 \\\"\\u041D\\u0430\\u0447\\u0430\\u0442\\u044C \\u0433\\u0435\\u043D\\u0435\\u0440\\u0430\\u0446\\u0438\\u044E\\\".\"}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"\\u041E\\u043F\\u0438\\u0448\\u0438\\u0442\\u0435, \\u0447\\u0442\\u043E \\u0445\\u043E\\u0442\\u0438\\u0442\\u0435 \\u0438\\u0437\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C...\",value:prompt,onChange:e=>setPrompt(e.target.value),rows:3,disabled:loading,style:{width:'100%',padding:10,fontSize:16,borderRadius:6,border:'1px solid #ccc',marginBottom:20,resize:'none'}}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:20},children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:handleImageUpload,disabled:loading,style:{marginBottom:10}}),imageURL&&/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative'},children:[/*#__PURE__*/_jsx(\"img\",{ref:imgRef,src:imageURL,alt:\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0436\\u0435\\u043D\\u043D\\u043E\\u0435\",style:{display:'block',maxWidth:'100%',borderRadius:6},onLoad:()=>{if(imgRef.current&&canvasRef.current){canvasRef.current.width=imgRef.current.width;canvasRef.current.height=imgRef.current.height;}clearMask();}}),/*#__PURE__*/_jsx(\"canvas\",{ref:canvasRef,onMouseDown:handleMouseDown,onMouseUp:handleMouseUp,onMouseLeave:handleMouseUp,onMouseMove:handleMouseMove,style:{position:'absolute',top:0,left:0,borderRadius:6,cursor:'crosshair',userSelect:'none'}})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:10},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(-1),disabled:loading,style:{flex:1,padding:10,borderRadius:6,border:'1px solid #ccc',background:'#fff',fontWeight:'bold'},children:\"\\u041D\\u0430\\u0437\\u0430\\u0434\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleGenerateClick,disabled:loading,style:{flex:2,padding:10,borderRadius:6,border:'none',background:'#6c63ff',color:'#fff',fontWeight:'bold'},children:loading?'Генерация...':'Начать генерацию'})]}),showLoginModal&&/*#__PURE__*/_jsx(\"div\",{style:{position:'fixed',top:0,left:0,right:0,bottom:0,backgroundColor:'rgba(0,0,0,0.5)',display:'flex',justifyContent:'center',alignItems:'center',zIndex:1000},onClick:()=>setShowLoginModal(false),children:/*#__PURE__*/_jsxs(\"div\",{onClick:e=>e.stopPropagation(),style:{backgroundColor:'#fff',padding:20,borderRadius:10,maxWidth:400,width:'90%',textAlign:'center'},children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u0414\\u043B\\u044F \\u0433\\u0435\\u043D\\u0435\\u0440\\u0430\\u0446\\u0438\\u0438 \\u043D\\u0435\\u043E\\u0431\\u0445\\u043E\\u0434\\u0438\\u043C\\u043E \\u0432\\u043E\\u0439\\u0442\\u0438 \\u0447\\u0435\\u0440\\u0435\\u0437 Telegram\"}),/*#__PURE__*/_jsx(\"a\",{href:\"https://t.me/zavod_worker_bot?start=login\",target:\"_blank\",rel:\"noreferrer\",style:{display:'inline-block',padding:'10px 20px',backgroundColor:'#0088cc',color:'#fff',borderRadius:6,textDecoration:'none',fontWeight:'bold',marginBottom:10},children:\"\\u0412\\u043E\\u0439\\u0442\\u0438 \\u0447\\u0435\\u0440\\u0435\\u0437 Telegram\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowLoginModal(false),style:{padding:'6px 12px',borderRadius:6,border:'1px solid #ccc',backgroundColor:'#fff',cursor:'pointer'},children:\"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"})]})})]});}","map":{"version":3,"names":["React","useState","useRef","useEffect","useNavigate","jsx","_jsx","jsxs","_jsxs","GenerateCharacter","navigate","prompt","setPrompt","imageFile","setImageFile","imageURL","setImageURL","loading","setLoading","isLoggedIn","setIsLoggedIn","showLoginModal","setShowLoginModal","canvasRef","imgRef","isDrawing","setIsDrawing","lastPos","setLastPos","x","y","fetch","credentials","then","res","ok","json","Promise","reject","catch","handleImageUpload","e","file","target","files","url","URL","createObjectURL","handleMouseDown","current","rect","getBoundingClientRect","clientX","left","clientY","top","handleMouseUp","handleMouseMove","ctx","getContext","strokeStyle","lineWidth","lineCap","beginPath","moveTo","lineTo","stroke","clearMask","clearRect","width","height","handleGenerateClick","trim","alert","formData","FormData","append","maskBlob","resolve","toBlob","method","body","Error","detail","data","state","images","concat","prompts","storyline","err","message","className","style","maxWidth","margin","padding","children","textAlign","marginBottom","fontSize","color","placeholder","value","onChange","rows","disabled","borderRadius","border","resize","type","accept","position","ref","src","alt","display","onLoad","onMouseDown","onMouseUp","onMouseLeave","onMouseMove","cursor","userSelect","gap","onClick","flex","background","fontWeight","right","bottom","backgroundColor","justifyContent","alignItems","zIndex","stopPropagation","href","rel","textDecoration"],"sources":["/var/www/storysight/src/pages/GenerateCharacter.js"],"sourcesContent":["// GenerateCharacter.js\nimport React, { useState, useRef, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport './Generate.css';\n\nexport default function GenerateCharacter() {\n    const navigate = useNavigate();\n\n    const [prompt, setPrompt] = useState('');\n    const [imageFile, setImageFile] = useState(null);\n    const [imageURL, setImageURL] = useState(null);\n    const [loading, setLoading] = useState(false);\n    const [isLoggedIn, setIsLoggedIn] = useState(null);\n    const [showLoginModal, setShowLoginModal] = useState(false);\n\n    const canvasRef = useRef(null);\n    const imgRef = useRef(null);\n    const [isDrawing, setIsDrawing] = useState(false);\n    const [lastPos, setLastPos] = useState({ x: 0, y: 0 });\n\n    useEffect(() => {\n        fetch('http://storysight.ru/api/auth/me', { credentials: 'include' })\n            .then(res => res.ok ? res.json() : Promise.reject())\n            .then(() => setIsLoggedIn(true))\n            .catch(() => setIsLoggedIn(false));\n    }, []);\n\n    const handleImageUpload = (e) => {\n        const file = e.target.files[0];\n        if (!file) return;\n        setImageFile(file);\n        const url = URL.createObjectURL(file);\n        setImageURL(url);\n    };\n\n    const handleMouseDown = (e) => {\n        if (!canvasRef.current) return;\n        setIsDrawing(true);\n        const rect = canvasRef.current.getBoundingClientRect();\n        setLastPos({ x: e.clientX - rect.left, y: e.clientY - rect.top });\n    };\n\n    const handleMouseUp = () => setIsDrawing(false);\n\n    const handleMouseMove = (e) => {\n        if (!isDrawing || !canvasRef.current) return;\n        const ctx = canvasRef.current.getContext('2d');\n        const rect = canvasRef.current.getBoundingClientRect();\n        const x = e.clientX - rect.left;\n        const y = e.clientY - rect.top;\n\n        ctx.strokeStyle = 'white';\n        ctx.lineWidth = 20;\n        ctx.lineCap = 'round';\n        ctx.beginPath();\n        ctx.moveTo(lastPos.x, lastPos.y);\n        ctx.lineTo(x, y);\n        ctx.stroke();\n        setLastPos({ x, y });\n    };\n\n    const clearMask = () => {\n        if (canvasRef.current) {\n            const ctx = canvasRef.current.getContext('2d');\n            ctx.clearRect(0, 0, canvasRef.current.width, canvasRef.current.height);\n        }\n    };\n\n    useEffect(() => {\n        clearMask();\n    }, [imageURL]);\n\n    const handleGenerateClick = async () => {\n        if (!isLoggedIn) {\n            setShowLoginModal(true);\n            return;\n        }\n        if (!prompt.trim()) return alert('Введите промпт.');\n        if (!imageFile) return alert('Загрузите изображение.');\n\n        setLoading(true);\n        try {\n            const formData = new FormData();\n            formData.append('prompt', prompt);\n            formData.append('character_name', 'MyCharacter');\n            formData.append('init_image', imageFile);\n            const maskBlob = await new Promise(resolve =>\n                canvasRef.current.toBlob(resolve, 'image/png')\n            );\n            formData.append('mask_image', maskBlob);\n\n            const res = await fetch('http://storysight.ru/api/edit-character', {\n                method: 'POST',\n                body: formData,\n            });\n            if (!res.ok) throw new Error((await res.json()).detail || 'Ошибка на сервере');\n\n            const data = await res.json();\n            navigate('/result-main', {\n                state: {\n                    images: [`data:image/png;base64,${data.images[0]}`],\n                    prompts: [prompt],\n                    storyline: 'Изменено в редакторе',\n                },\n            });\n        } catch (err) {\n            alert('Ошибка: ' + err.message);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    return (\n        <div className=\"generate-container\" style={{ maxWidth: 600, margin: '30px auto', padding: 20 }}>\n            <h1 style={{ textAlign: 'center', marginBottom: 20 }}>Редактирование изображения</h1>\n            <p style={{ fontSize: 14, color: '#555', marginBottom: 20 }}>\n                Загрузите изображение, выделите область для изменения, введите промпт и нажмите \"Начать генерацию\".\n            </p>\n\n            <textarea\n                placeholder=\"Опишите, что хотите изменить...\"\n                value={prompt}\n                onChange={e => setPrompt(e.target.value)}\n                rows={3}\n                disabled={loading}\n                style={{\n                    width: '100%', padding: 10, fontSize: 16, borderRadius: 6,\n                    border: '1px solid #ccc', marginBottom: 20, resize: 'none'\n                }}\n            />\n\n            <div style={{ marginBottom: 20 }}>\n                <input\n                    type=\"file\"\n                    accept=\"image/*\"\n                    onChange={handleImageUpload}\n                    disabled={loading}\n                    style={{ marginBottom: 10 }}\n                />\n                {imageURL && (\n                    <div style={{ position: 'relative' }}>\n                        <img\n                            ref={imgRef}\n                            src={imageURL}\n                            alt=\"Загруженное\"\n                            style={{ display: 'block', maxWidth: '100%', borderRadius: 6 }}\n                            onLoad={() => {\n                                if (imgRef.current && canvasRef.current) {\n                                    canvasRef.current.width = imgRef.current.width;\n                                    canvasRef.current.height = imgRef.current.height;\n                                }\n                                clearMask();\n                            }}\n                        />\n                        <canvas\n                            ref={canvasRef}\n                            onMouseDown={handleMouseDown}\n                            onMouseUp={handleMouseUp}\n                            onMouseLeave={handleMouseUp}\n                            onMouseMove={handleMouseMove}\n                            style={{\n                                position: 'absolute', top: 0, left: 0,\n                                borderRadius: 6, cursor: 'crosshair', userSelect: 'none'\n                            }}\n                        />\n                    </div>\n                )}\n            </div>\n\n            <div style={{ display: 'flex', gap: 10 }}>\n                <button\n                    onClick={() => navigate(-1)}\n                    disabled={loading}\n                    style={{\n                        flex: 1, padding: 10, borderRadius: 6,\n                        border: '1px solid #ccc', background: '#fff', fontWeight: 'bold'\n                    }}\n                >\n                    Назад\n                </button>\n                <button\n                    onClick={handleGenerateClick}\n                    disabled={loading}\n                    style={{\n                        flex: 2, padding: 10, borderRadius: 6,\n                        border: 'none', background: '#6c63ff',\n                        color: '#fff', fontWeight: 'bold'\n                    }}\n                >\n                    {loading ? 'Генерация...' : 'Начать генерацию'}\n                </button>\n            </div>\n\n            {showLoginModal && (\n                <div\n                    style={{\n                        position: 'fixed', top: 0, left: 0, right: 0, bottom: 0,\n                        backgroundColor: 'rgba(0,0,0,0.5)', display: 'flex',\n                        justifyContent: 'center', alignItems: 'center', zIndex: 1000\n                    }}\n                    onClick={() => setShowLoginModal(false)}\n                >\n                    <div\n                        onClick={e => e.stopPropagation()}\n                        style={{\n                            backgroundColor: '#fff', padding: 20,\n                            borderRadius: 10, maxWidth: 400, width: '90%', textAlign: 'center'\n                        }}\n                    >\n                        <p>Для генерации необходимо войти через Telegram</p>\n                        <a\n                            href=\"https://t.me/zavod_worker_bot?start=login\"\n                            target=\"_blank\"\n                            rel=\"noreferrer\"\n                            style={{\n                                display: 'inline-block', padding: '10px 20px',\n                                backgroundColor: '#0088cc', color: '#fff',\n                                borderRadius: 6, textDecoration: 'none',\n                                fontWeight: 'bold', marginBottom: 10\n                            }}\n                        >\n                            Войти через Telegram\n                        </a>\n                        <br />\n                        <button\n                            onClick={() => setShowLoginModal(false)}\n                            style={{\n                                padding: '6px 12px', borderRadius: 6,\n                                border: '1px solid #ccc', backgroundColor: '#fff',\n                                cursor: 'pointer'\n                            }}\n                        >\n                            Отмена\n                        </button>\n                    </div>\n                </div>\n            )}\n        </div>\n    );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
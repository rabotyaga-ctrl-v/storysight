{"ast":null,"code":"import React,{useEffect,useState,useRef}from\"react\";import axios from\"axios\";import\"./myprojects.css\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const MyProjects=()=>{const[user,setUser]=useState(null);const[images,setImages]=useState([]);const[loadingUser,setLoadingUser]=useState(true);const[loadingImages,setLoadingImages]=useState(false);const[showModal,setShowModal]=useState(false);const modalRef=useRef(null);// Получаем пользователя при загрузке страницы\nuseEffect(()=>{axios.get(\"http://storysight.ru:8000/auth/me\",{withCredentials:true}).then(res=>{setUser(res.data);setShowModal(false);}).catch(()=>{setUser(null);setShowModal(true);// Если не авторизован — показать модалку\n}).finally(()=>setLoadingUser(false));},[]);// Загрузка изображений пользователя\nuseEffect(()=>{if(user){setLoadingImages(true);axios.get(\"http://storysight.ru:8000/my-projects\",{withCredentials:true}).then(res=>setImages(res.data)).catch(err=>console.error(\"Ошибка при загрузке изображений:\",err)).finally(()=>setLoadingImages(false));}},[user]);// Обработчик Telegram авторизации — слушаем событие, вызываем API и закрываем модалку\nuseEffect(()=>{// Функция, вызываемая из виджета Telegram (будет доступна в window)\nwindow.onTelegramAuth=function(user){// Генерируем и диспатчим кастомное событие с данными телеги\nconst event=new CustomEvent(\"tg-auth\",{detail:user});window.dispatchEvent(event);};const handleTelegramAuth=async e=>{const telegramUser=e.detail;try{await axios.post(\"http://storysight.ru:8000/auth/login\",telegramUser,{withCredentials:true});const res=await axios.get(\"http://storysight.ru:8000/auth/me\",{withCredentials:true});setUser(res.data);setShowModal(false);}catch(error){console.error(\"Ошибка авторизации через Telegram:\",error);alert(\"Ошибка авторизации через Telegram\");}};window.addEventListener(\"tg-auth\",handleTelegramAuth);return()=>{window.removeEventListener(\"tg-auth\",handleTelegramAuth);window.onTelegramAuth=null;};},[]);// Вставка Telegram-виджета в модальное окно\nuseEffect(()=>{if(showModal&&modalRef.current){// Очищаем контейнер\nmodalRef.current.innerHTML=\"\";// Удаляем предыдущий скрипт виджета, если есть\nconst existingScript=document.querySelector('script[src=\"https://telegram.org/js/telegram-widget.js?22\"]');if(existingScript)existingScript.remove();// Создаем новый скрипт виджета\nconst script=document.createElement(\"script\");script.src=\"https://telegram.org/js/telegram-widget.js?22\";script.async=true;script.setAttribute(\"data-telegram-login\",\"zavod_worker_bot\");script.setAttribute(\"data-size\",\"large\");script.setAttribute(\"data-userpic\",\"false\");script.setAttribute(\"data-onauth\",\"onTelegramAuth(user)\");script.setAttribute(\"data-request-access\",\"write\");// Вставляем скрипт в контейнер\nmodalRef.current.appendChild(script);}},[showModal]);// Скачать изображение\nconst downloadImage=(url,title,id)=>{const link=document.createElement(\"a\");link.href=url;const safeTitle=title?title.replace(/[^a-z0-9]/gi,\"_\").toLowerCase():\"image_\".concat(id);link.download=\"\".concat(safeTitle,\".png\");document.body.appendChild(link);link.click();document.body.removeChild(link);};// Рендер состояния загрузки пользователя\nif(loadingUser)return/*#__PURE__*/_jsx(\"p\",{className:\"myprojects-message\",children:\"\\u041F\\u0440\\u043E\\u0432\\u0435\\u0440\\u043A\\u0430 \\u0430\\u0432\\u0442\\u043E\\u0440\\u0438\\u0437\\u0430\\u0446\\u0438\\u0438...\"});// Модальное окно с Telegram виджетом\nconst Modal=()=>/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:()=>setShowModal(false),children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",onClick:e=>e.stopPropagation(),role:\"dialog\",\"aria-modal\":\"true\",\"aria-labelledby\":\"modal-title\",children:[/*#__PURE__*/_jsx(\"h2\",{id:\"modal-title\",style:{color:\"black\"},children:\"\\u041F\\u043E\\u0436\\u0430\\u043B\\u0443\\u0439\\u0441\\u0442\\u0430, \\u0430\\u0432\\u0442\\u043E\\u0440\\u0438\\u0437\\u0443\\u0439\\u0442\\u0435\\u0441\\u044C \\u0447\\u0435\\u0440\\u0435\\u0437 Telegram\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u041F\\u043E\\u0436\\u0430\\u043B\\u0443\\u0439\\u0441\\u0442\\u0430, \\u0432\\u043E\\u0439\\u0434\\u0438\\u0442\\u0435, \\u0447\\u0442\\u043E\\u0431\\u044B \\u043F\\u0440\\u043E\\u0434\\u043E\\u043B\\u0436\\u0438\\u0442\\u044C\"}),/*#__PURE__*/_jsx(\"div\",{ref:modalRef}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-gray\",onClick:()=>setShowModal(false),children:\"\\u0417\\u0430\\u043A\\u0440\\u044B\\u0442\\u044C\"})]})});return/*#__PURE__*/_jsxs(\"div\",{className:\"myprojects-container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"myprojects-title\",children:\"\\u041C\\u043E\\u0438 \\u043F\\u0440\\u043E\\u0435\\u043A\\u0442\\u044B\"}),!user&&/*#__PURE__*/_jsx(\"p\",{className:\"myprojects-message\",children:\"\\u0414\\u043B\\u044F \\u043F\\u0440\\u043E\\u0441\\u043C\\u043E\\u0442\\u0440\\u0430 \\u043F\\u0440\\u043E\\u0435\\u043A\\u0442\\u043E\\u0432 \\u043D\\u0435\\u043E\\u0431\\u0445\\u043E\\u0434\\u0438\\u043C\\u043E \\u0432\\u043E\\u0439\\u0442\\u0438 \\u0432 \\u0430\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442.\"}),loadingImages&&/*#__PURE__*/_jsx(\"p\",{className:\"myprojects-message\",children:\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430 \\u043F\\u0440\\u043E\\u0435\\u043A\\u0442\\u043E\\u0432...\"}),user&&!loadingImages&&images.length===0&&/*#__PURE__*/_jsx(\"p\",{className:\"myprojects-message\",children:\"\\u041F\\u043E\\u043A\\u0430 \\u043D\\u0435\\u0442 \\u043D\\u0438 \\u043E\\u0434\\u043D\\u043E\\u0433\\u043E \\u0438\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u044F\"}),user&&!loadingImages&&images.length>0&&/*#__PURE__*/_jsx(_Fragment,{children:Object.entries(images.reduce((acc,img)=>{var _img$storyline;let datePart=\"неизвестно\";try{const parsedDate=new Date(img.created_at);if(!isNaN(parsedDate)){datePart=parsedDate.toISOString().slice(0,16);}}catch(_unused){}const storylineText=((_img$storyline=img.storyline)===null||_img$storyline===void 0?void 0:_img$storyline.trim())||\"Без описания\";const key=\"\".concat(datePart,\"||\").concat(storylineText);if(!acc[key])acc[key]=[];acc[key].push(img);return acc;},{})).sort((a,b)=>new Date(b[0].split(\"||\")[0])-new Date(a[0].split(\"||\")[0])).map((_ref,index)=>{let[key,group]=_ref;const[,storyline]=key.split(\"||\");return/*#__PURE__*/_jsxs(\"div\",{className:\"project-group\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"storyline\",children:storyline}),/*#__PURE__*/_jsx(\"div\",{className:\"myprojects-grid\",children:group.map(img=>/*#__PURE__*/_jsxs(\"div\",{className:\"project-card\",children:[/*#__PURE__*/_jsx(\"img\",{src:img.url,alt:img.title||\"Изображение\",className:\"project-image\"}),img.title&&/*#__PURE__*/_jsx(\"div\",{className:\"project-prompt\",children:img.title}),/*#__PURE__*/_jsx(\"button\",{className:\"download-button\",onClick:()=>downloadImage(img.url,img.title,img.id),children:\"\\u0421\\u043A\\u0430\\u0447\\u0430\\u0442\\u044C\"})]},img.id))})]},index);})}),showModal&&/*#__PURE__*/_jsx(Modal,{})]});};export default MyProjects;","map":{"version":3,"names":["React","useEffect","useState","useRef","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","MyProjects","user","setUser","images","setImages","loadingUser","setLoadingUser","loadingImages","setLoadingImages","showModal","setShowModal","modalRef","get","withCredentials","then","res","data","catch","finally","err","console","error","window","onTelegramAuth","event","CustomEvent","detail","dispatchEvent","handleTelegramAuth","e","telegramUser","post","alert","addEventListener","removeEventListener","current","innerHTML","existingScript","document","querySelector","remove","script","createElement","src","async","setAttribute","appendChild","downloadImage","url","title","id","link","href","safeTitle","replace","toLowerCase","concat","download","body","click","removeChild","className","children","Modal","onClick","stopPropagation","role","style","color","ref","length","Object","entries","reduce","acc","img","_img$storyline","datePart","parsedDate","Date","created_at","isNaN","toISOString","slice","_unused","storylineText","storyline","trim","key","push","sort","a","b","split","map","_ref","index","group","alt"],"sources":["/var/www/storysight/src/pages/myprojects.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\nimport axios from \"axios\";\nimport \"./myprojects.css\";\n\nconst MyProjects = () => {\n  const [user, setUser] = useState(null);\n  const [images, setImages] = useState([]);\n  const [loadingUser, setLoadingUser] = useState(true);\n  const [loadingImages, setLoadingImages] = useState(false);\n  const [showModal, setShowModal] = useState(false);\n\n  const modalRef = useRef(null);\n\n  // Получаем пользователя при загрузке страницы\n  useEffect(() => {\n    axios\n      .get(\"http://storysight.ru:8000/auth/me\", { withCredentials: true })\n      .then((res) => {\n        setUser(res.data);\n        setShowModal(false);\n      })\n      .catch(() => {\n        setUser(null);\n        setShowModal(true); // Если не авторизован — показать модалку\n      })\n      .finally(() => setLoadingUser(false));\n  }, []);\n\n  // Загрузка изображений пользователя\n  useEffect(() => {\n    if (user) {\n      setLoadingImages(true);\n      axios\n        .get(\"http://storysight.ru:8000/my-projects\", { withCredentials: true })\n        .then((res) => setImages(res.data))\n        .catch((err) => console.error(\"Ошибка при загрузке изображений:\", err))\n        .finally(() => setLoadingImages(false));\n    }\n  }, [user]);\n\n  // Обработчик Telegram авторизации — слушаем событие, вызываем API и закрываем модалку\n  useEffect(() => {\n    // Функция, вызываемая из виджета Telegram (будет доступна в window)\n    window.onTelegramAuth = function (user) {\n      // Генерируем и диспатчим кастомное событие с данными телеги\n      const event = new CustomEvent(\"tg-auth\", { detail: user });\n      window.dispatchEvent(event);\n    };\n\n    const handleTelegramAuth = async (e) => {\n      const telegramUser = e.detail;\n\n      try {\n        await axios.post(\"http://storysight.ru:8000/auth/login\", telegramUser, {\n          withCredentials: true,\n        });\n        const res = await axios.get(\"http://storysight.ru:8000/auth/me\", {\n          withCredentials: true,\n        });\n        setUser(res.data);\n        setShowModal(false);\n      } catch (error) {\n        console.error(\"Ошибка авторизации через Telegram:\", error);\n        alert(\"Ошибка авторизации через Telegram\");\n      }\n    };\n\n    window.addEventListener(\"tg-auth\", handleTelegramAuth);\n    return () => {\n      window.removeEventListener(\"tg-auth\", handleTelegramAuth);\n      window.onTelegramAuth = null;\n    };\n  }, []);\n\n  // Вставка Telegram-виджета в модальное окно\n  useEffect(() => {\n    if (showModal && modalRef.current) {\n      // Очищаем контейнер\n      modalRef.current.innerHTML = \"\";\n\n      // Удаляем предыдущий скрипт виджета, если есть\n      const existingScript = document.querySelector(\n        'script[src=\"https://telegram.org/js/telegram-widget.js?22\"]'\n      );\n      if (existingScript) existingScript.remove();\n\n      // Создаем новый скрипт виджета\n      const script = document.createElement(\"script\");\n      script.src = \"https://telegram.org/js/telegram-widget.js?22\";\n      script.async = true;\n      script.setAttribute(\"data-telegram-login\", \"zavod_worker_bot\");\n      script.setAttribute(\"data-size\", \"large\");\n      script.setAttribute(\"data-userpic\", \"false\");\n      script.setAttribute(\"data-onauth\", \"onTelegramAuth(user)\");\n      script.setAttribute(\"data-request-access\", \"write\");\n\n      // Вставляем скрипт в контейнер\n      modalRef.current.appendChild(script);\n    }\n  }, [showModal]);\n\n  // Скачать изображение\n  const downloadImage = (url, title, id) => {\n    const link = document.createElement(\"a\");\n    link.href = url;\n    const safeTitle = title ? title.replace(/[^a-z0-9]/gi, \"_\").toLowerCase() : `image_${id}`;\n    link.download = `${safeTitle}.png`;\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  };\n\n  // Рендер состояния загрузки пользователя\n  if (loadingUser) return <p className=\"myprojects-message\">Проверка авторизации...</p>;\n\n  // Модальное окно с Telegram виджетом\n  const Modal = () => (\n    <div className=\"modal-overlay\" onClick={() => setShowModal(false)}>\n      <div\n        className=\"modal-content\"\n        onClick={(e) => e.stopPropagation()}\n        role=\"dialog\"\n        aria-modal=\"true\"\n        aria-labelledby=\"modal-title\"\n      >\n        <h2 id=\"modal-title\" style={{ color: \"black\" }}>Пожалуйста, авторизуйтесь через Telegram</h2>\n        <p>Пожалуйста, войдите, чтобы продолжить</p>\n        <div ref={modalRef} />\n        <button className=\"btn btn-gray\" onClick={() => setShowModal(false)}>\n          Закрыть\n        </button>\n      </div>\n    </div>\n  );\n\n  return (\n    <div className=\"myprojects-container\">\n      <h1 className=\"myprojects-title\">Мои проекты</h1>\n\n      {!user && <p className=\"myprojects-message\">Для просмотра проектов необходимо войти в аккаунт.</p>}\n\n      {loadingImages && <p className=\"myprojects-message\">Загрузка проектов...</p>}\n\n      {user && !loadingImages && images.length === 0 && (\n        <p className=\"myprojects-message\">Пока нет ни одного изображения</p>\n      )}\n\n      {user && !loadingImages && images.length > 0 && (\n        <>\n          {Object.entries(\n            images.reduce((acc, img) => {\n              let datePart = \"неизвестно\";\n              try {\n                const parsedDate = new Date(img.created_at);\n                if (!isNaN(parsedDate)) {\n                  datePart = parsedDate.toISOString().slice(0, 16);\n                }\n              } catch {}\n              const storylineText = img.storyline?.trim() || \"Без описания\";\n              const key = `${datePart}||${storylineText}`;\n              if (!acc[key]) acc[key] = [];\n              acc[key].push(img);\n              return acc;\n            }, {})\n          )\n            .sort((a, b) => new Date(b[0].split(\"||\")[0]) - new Date(a[0].split(\"||\")[0]))\n            .map(([key, group], index) => {\n              const [, storyline] = key.split(\"||\");\n              return (\n                <div key={index} className=\"project-group\">\n                  <div className=\"storyline\">{storyline}</div>\n                  <div className=\"myprojects-grid\">\n                    {group.map((img) => (\n                      <div key={img.id} className=\"project-card\">\n                        <img\n                          src={img.url}\n                          alt={img.title || \"Изображение\"}\n                          className=\"project-image\"\n                        />\n                        {img.title && <div className=\"project-prompt\">{img.title}</div>}\n                        <button\n                          className=\"download-button\"\n                          onClick={() => downloadImage(img.url, img.title, img.id)}\n                        >\n                          Скачать\n                        </button>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              );\n            })}\n        </>\n      )}\n\n      {showModal && <Modal />}\n    </div>\n  );\n};\n\nexport default MyProjects;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
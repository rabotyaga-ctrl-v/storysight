{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function MyProjects(){const[images,setImages]=useState([]);const[loading,setLoading]=useState(true);useEffect(()=>{const user=JSON.parse(localStorage.getItem(\"tg_user\"));if(!user){console.error(\"Пользователь не авторизован\");return;}fetch(\"http://localhost:8000/api/my-projects/\",{headers:{\"X-Telegram-ID\":user.id}}).then(res=>{if(!res.ok){throw new Error(\"Ошибка при получении проектов\");}return res.json();}).then(data=>{console.log(\"Полученные изображения:\",data);setImages(data);}).catch(err=>{console.error(\"Ошибка загрузки:\",err);}).finally(()=>{setLoading(false);});},[]);return/*#__PURE__*/_jsxs(\"div\",{style:{padding:\"20px\"},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u041C\\u043E\\u0438 \\u043F\\u0440\\u043E\\u0435\\u043A\\u0442\\u044B\"}),loading?/*#__PURE__*/_jsx(\"p\",{children:\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430...\"}):images.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"\\u041F\\u0440\\u043E\\u0435\\u043A\\u0442\\u044B \\u043D\\u0435 \\u043D\\u0430\\u0439\\u0434\\u0435\\u043D\\u044B.\"}):/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",flexWrap:\"wrap\",gap:\"20px\"},children:images.map(image=>{const imgSrc=image.image_data.startsWith(\"data:\")?image.image_data:\"data:image/webp;base64,\".concat(image.image_data);return/*#__PURE__*/_jsxs(\"div\",{style:{width:\"200px\"},children:[/*#__PURE__*/_jsx(\"img\",{src:imgSrc,alt:\"\\u041F\\u0440\\u043E\\u0435\\u043A\\u0442 \".concat(image.id),style:{width:\"100%\",borderRadius:\"8px\",boxShadow:\"0 0 5px rgba(0,0,0,0.3)\"}}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:\"0.85rem\",marginTop:\"5px\"},children:image.prompt})]},image.id);})})]});}","map":{"version":3,"names":["React","useEffect","useState","jsx","_jsx","jsxs","_jsxs","MyProjects","images","setImages","loading","setLoading","user","JSON","parse","localStorage","getItem","console","error","fetch","headers","id","then","res","ok","Error","json","data","log","catch","err","finally","style","padding","children","length","display","flexWrap","gap","map","image","imgSrc","image_data","startsWith","concat","width","src","alt","borderRadius","boxShadow","fontSize","marginTop","prompt"],"sources":["/root/diplomka/src/pages/MyProjects.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\n\nexport default function MyProjects() {\n    const [images, setImages] = useState([]);\n    const [loading, setLoading] = useState(true);\n\n    useEffect(() => {\n        const user = JSON.parse(localStorage.getItem(\"tg_user\"));\n        if (!user) {\n            console.error(\"Пользователь не авторизован\");\n            return;\n        }\n\n        fetch(\"http://localhost:8000/api/my-projects/\", {\n            headers: {\n                \"X-Telegram-ID\": user.id,\n            },\n        })\n            .then((res) => {\n                if (!res.ok) {\n                    throw new Error(\"Ошибка при получении проектов\");\n                }\n                return res.json();\n            })\n            .then((data) => {\n                console.log(\"Полученные изображения:\", data);\n                setImages(data);\n            })\n            .catch((err) => {\n                console.error(\"Ошибка загрузки:\", err);\n            })\n            .finally(() => {\n                setLoading(false);\n            });\n    }, []);\n\n    return (\n        <div style={{ padding: \"20px\" }}>\n            <h2>Мои проекты</h2>\n\n            {loading ? (\n                <p>Загрузка...</p>\n            ) : images.length === 0 ? (\n                <p>Проекты не найдены.</p>\n            ) : (\n                <div style={{ display: \"flex\", flexWrap: \"wrap\", gap: \"20px\" }}>\n                    {images.map((image) => {\n                        const imgSrc = image.image_data.startsWith(\"data:\")\n                            ? image.image_data\n                            : `data:image/webp;base64,${image.image_data}`;\n\n                        return (\n                            <div key={image.id} style={{ width: \"200px\" }}>\n                                <img\n                                    src={imgSrc}\n                                    alt={`Проект ${image.id}`}\n                                    style={{\n                                        width: \"100%\",\n                                        borderRadius: \"8px\",\n                                        boxShadow: \"0 0 5px rgba(0,0,0,0.3)\",\n                                    }}\n                                />\n                                <p style={{ fontSize: \"0.85rem\", marginTop: \"5px\" }}>\n                                    {image.prompt}\n                                </p>\n                            </div>\n                        );\n                    })}\n                </div>\n            )}\n        </div>\n    );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import React,{useEffect}from'react';import{jsxs as _jsxs,jsx as _jsx,Fragment as _Fragment}from\"react/jsx-runtime\";export default function TelegramLogin(_ref){let{user,onTelegramAuth,handleLogout}=_ref;useEffect(()=>{// Динамически подгружаем скрипт Telegram Login Widget\nconst scriptId='telegram-login-script';if(!document.getElementById(scriptId)){const script=document.createElement('script');script.id=scriptId;script.src='https://telegram.org/js/telegram-widget.js?15';script.setAttribute('data-telegram-login','zavod_worker_bot');// <-- Заменить на юзернейм твоего бота\nscript.setAttribute('data-size','large');script.setAttribute('data-userpic','false');script.setAttribute('data-auth-url','');// Не использовать, т.к. мы принимаем через callback\nscript.setAttribute('data-request-access','write');script.setAttribute('data-userpic','false');script.setAttribute('data-lang','ru');script.setAttribute('data-onauth','onTelegramAuth(user)');// Передаем колбэк\nscript.async=true;document.getElementById('telegram-button').appendChild(script);}},[]);return/*#__PURE__*/_jsx(\"div\",{style:{maxWidth:320,margin:'auto',textAlign:'center'},children:user?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"\\u041F\\u0440\\u0438\\u0432\\u0435\\u0442, \",user.username||user.first_name,\"!\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,style:{marginTop:'20px',padding:'10px 20px',border:'none',borderRadius:'8px',backgroundColor:'#ff5e7e',color:'white',cursor:'pointer',fontSize:'16px'},children:\"\\u0412\\u044B\\u0439\\u0442\\u0438\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u0412\\u043E\\u0439\\u0442\\u0438 \\u0432 \\u0430\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u0410\\u0432\\u0442\\u043E\\u0440\\u0438\\u0437\\u0443\\u0439\\u0442\\u0435\\u0441\\u044C \\u0447\\u0435\\u0440\\u0435\\u0437 Telegram, \\u0447\\u0442\\u043E\\u0431\\u044B \\u0441\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C \\u0432\\u0430\\u0448\\u0438 \\u0438\\u0441\\u0442\\u043E\\u0440\\u0438\\u0438 \\u0438 \\u0438\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u044F.\"}),/*#__PURE__*/_jsx(\"div\",{id:\"telegram-button\",style:{marginTop:'20px'}})]})});}","map":{"version":3,"names":["React","useEffect","jsxs","_jsxs","jsx","_jsx","Fragment","_Fragment","TelegramLogin","_ref","user","onTelegramAuth","handleLogout","scriptId","document","getElementById","script","createElement","id","src","setAttribute","async","appendChild","style","maxWidth","margin","textAlign","children","username","first_name","onClick","marginTop","padding","border","borderRadius","backgroundColor","color","cursor","fontSize"],"sources":["/root/diplomka/src/pages/TelegramLogin.jsx"],"sourcesContent":["import React, { useEffect } from 'react';\n\nexport default function TelegramLogin({ user, onTelegramAuth, handleLogout }) {\n  useEffect(() => {\n    // Динамически подгружаем скрипт Telegram Login Widget\n    const scriptId = 'telegram-login-script';\n    if (!document.getElementById(scriptId)) {\n      const script = document.createElement('script');\n      script.id = scriptId;\n      script.src = 'https://telegram.org/js/telegram-widget.js?15';\n      script.setAttribute('data-telegram-login', 'zavod_worker_bot'); // <-- Заменить на юзернейм твоего бота\n      script.setAttribute('data-size', 'large');\n      script.setAttribute('data-userpic', 'false');\n      script.setAttribute('data-auth-url', ''); // Не использовать, т.к. мы принимаем через callback\n      script.setAttribute('data-request-access', 'write');\n      script.setAttribute('data-userpic', 'false');\n      script.setAttribute('data-lang', 'ru');\n      script.setAttribute('data-onauth', 'onTelegramAuth(user)'); // Передаем колбэк\n      script.async = true;\n\n      document.getElementById('telegram-button').appendChild(script);\n    }\n  }, []);\n\n  return (\n    <div style={{ maxWidth: 320, margin: 'auto', textAlign: 'center' }}>\n      {user ? (\n        <>\n          <h2>Привет, {user.username || user.first_name}!</h2>\n          <button\n            onClick={handleLogout}\n            style={{\n              marginTop: '20px',\n              padding: '10px 20px',\n              border: 'none',\n              borderRadius: '8px',\n              backgroundColor: '#ff5e7e',\n              color: 'white',\n              cursor: 'pointer',\n              fontSize: '16px',\n            }}\n          >\n            Выйти\n          </button>\n        </>\n      ) : (\n        <>\n          <h1>Войти в аккаунт</h1>\n          <p>Авторизуйтесь через Telegram, чтобы сохранить ваши истории и изображения.</p>\n          <div id=\"telegram-button\" style={{ marginTop: '20px' }}></div>\n        </>\n      )}\n    </div>\n  );\n}\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,KAAQ,OAAO,CAAC,OAAAC,IAAA,IAAAC,KAAA,CAAAC,GAAA,IAAAC,IAAA,CAAAC,QAAA,IAAAC,SAAA,yBAEzC,cAAe,SAAS,CAAAC,aAAaA,CAAAC,IAAA,CAAyC,IAAxC,CAAEC,IAAI,CAAEC,cAAc,CAAEC,YAAa,CAAC,CAAAH,IAAA,CAC1ER,SAAS,CAAC,IAAM,CACd;AACA,KAAM,CAAAY,QAAQ,CAAG,uBAAuB,CACxC,GAAI,CAACC,QAAQ,CAACC,cAAc,CAACF,QAAQ,CAAC,CAAE,CACtC,KAAM,CAAAG,MAAM,CAAGF,QAAQ,CAACG,aAAa,CAAC,QAAQ,CAAC,CAC/CD,MAAM,CAACE,EAAE,CAAGL,QAAQ,CACpBG,MAAM,CAACG,GAAG,CAAG,+CAA+C,CAC5DH,MAAM,CAACI,YAAY,CAAC,qBAAqB,CAAE,kBAAkB,CAAC,CAAE;AAChEJ,MAAM,CAACI,YAAY,CAAC,WAAW,CAAE,OAAO,CAAC,CACzCJ,MAAM,CAACI,YAAY,CAAC,cAAc,CAAE,OAAO,CAAC,CAC5CJ,MAAM,CAACI,YAAY,CAAC,eAAe,CAAE,EAAE,CAAC,CAAE;AAC1CJ,MAAM,CAACI,YAAY,CAAC,qBAAqB,CAAE,OAAO,CAAC,CACnDJ,MAAM,CAACI,YAAY,CAAC,cAAc,CAAE,OAAO,CAAC,CAC5CJ,MAAM,CAACI,YAAY,CAAC,WAAW,CAAE,IAAI,CAAC,CACtCJ,MAAM,CAACI,YAAY,CAAC,aAAa,CAAE,sBAAsB,CAAC,CAAE;AAC5DJ,MAAM,CAACK,KAAK,CAAG,IAAI,CAEnBP,QAAQ,CAACC,cAAc,CAAC,iBAAiB,CAAC,CAACO,WAAW,CAACN,MAAM,CAAC,CAChE,CACF,CAAC,CAAE,EAAE,CAAC,CAEN,mBACEX,IAAA,QAAKkB,KAAK,CAAE,CAAEC,QAAQ,CAAE,GAAG,CAAEC,MAAM,CAAE,MAAM,CAAEC,SAAS,CAAE,QAAS,CAAE,CAAAC,QAAA,CAChEjB,IAAI,cACHP,KAAA,CAAAI,SAAA,EAAAoB,QAAA,eACExB,KAAA,OAAAwB,QAAA,EAAI,wCAAQ,CAACjB,IAAI,CAACkB,QAAQ,EAAIlB,IAAI,CAACmB,UAAU,CAAC,GAAC,EAAI,CAAC,cACpDxB,IAAA,WACEyB,OAAO,CAAElB,YAAa,CACtBW,KAAK,CAAE,CACLQ,SAAS,CAAE,MAAM,CACjBC,OAAO,CAAE,WAAW,CACpBC,MAAM,CAAE,MAAM,CACdC,YAAY,CAAE,KAAK,CACnBC,eAAe,CAAE,SAAS,CAC1BC,KAAK,CAAE,OAAO,CACdC,MAAM,CAAE,SAAS,CACjBC,QAAQ,CAAE,MACZ,CAAE,CAAAX,QAAA,CACH,gCAED,CAAQ,CAAC,EACT,CAAC,cAEHxB,KAAA,CAAAI,SAAA,EAAAoB,QAAA,eACEtB,IAAA,OAAAsB,QAAA,CAAI,kFAAe,CAAI,CAAC,cACxBtB,IAAA,MAAAsB,QAAA,CAAG,8VAAyE,CAAG,CAAC,cAChFtB,IAAA,QAAKa,EAAE,CAAC,iBAAiB,CAACK,KAAK,CAAE,CAAEQ,SAAS,CAAE,MAAO,CAAE,CAAM,CAAC,EAC9D,CACH,CACE,CAAC,CAEV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
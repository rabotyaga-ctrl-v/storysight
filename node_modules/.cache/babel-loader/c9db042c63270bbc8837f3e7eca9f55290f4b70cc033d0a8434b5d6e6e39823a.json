{"ast":null,"code":"import React,{useState,useRef,useEffect}from'react';import{useNavigate}from'react-router-dom';import'./Generate.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function GenerateCharacter(){const navigate=useNavigate();const[prompt,setPrompt]=useState('');const[imageFile,setImageFile]=useState(null);const[imageURL,setImageURL]=useState(null);const[loading,setLoading]=useState(false);const[,setResultImage]=useState(null);// для результата\nconst canvasRef=useRef(null);const imgRef=useRef(null);const[isDrawing,setIsDrawing]=useState(false);const[lastPos,setLastPos]=useState({x:0,y:0});// Получение пользователя из localStorage\nfunction getCurrentUser(){try{const user=localStorage.getItem('user');// ключ 'user' или 'token' по твоему хранению\nreturn user?JSON.parse(user):null;}catch(_unused){return null;}}const handleImageUpload=e=>{const file=e.target.files[0];if(!file)return;setImageFile(file);const url=URL.createObjectURL(file);setImageURL(url);setResultImage(null);// сброс результата при новом файле\n};const handleMouseDown=e=>{if(!canvasRef.current)return;setIsDrawing(true);const rect=canvasRef.current.getBoundingClientRect();setLastPos({x:e.clientX-rect.left,y:e.clientY-rect.top});};const handleMouseUp=()=>{setIsDrawing(false);};const handleMouseMove=e=>{if(!isDrawing||!canvasRef.current)return;const ctx=canvasRef.current.getContext('2d');const rect=canvasRef.current.getBoundingClientRect();const currentX=e.clientX-rect.left;const currentY=e.clientY-rect.top;ctx.strokeStyle='white';// белая кисть\nctx.lineWidth=20;ctx.lineCap='round';ctx.globalAlpha=1.0;// полностью непрозрачная кисть\nctx.beginPath();ctx.moveTo(lastPos.x,lastPos.y);ctx.lineTo(currentX,currentY);ctx.stroke();setLastPos({x:currentX,y:currentY});};const clearMask=()=>{if(!canvasRef.current)return;const ctx=canvasRef.current.getContext('2d');ctx.clearRect(0,0,canvasRef.current.width,canvasRef.current.height);};useEffect(()=>{clearMask();setResultImage(null);},[imageURL]);const handleGenerateClick=async()=>{// Проверяем, есть ли залогиненный пользователь\nconst user=getCurrentUser();if(!user){// если нет — отправляем на страницу логина\nnavigate('/telegram-login',{state:{from:'/generate-character'}});return;}if(!prompt.trim()){alert('Пожалуйста, введите промпт.');return;}if(!imageFile){alert('Пожалуйста, загрузите изображение.');return;}setLoading(true);try{const formData=new FormData();formData.append('prompt',prompt);formData.append('character_name','MyCharacter');// обязательно!\nformData.append('init_image',imageFile);// Получаем blob маски из canvas (формат PNG)\nconst maskBlob=await new Promise(resolve=>canvasRef.current.toBlob(resolve,'image/png'));formData.append('mask_image',maskBlob);const response=await fetch('http://storysight.ru/api/edit-character',{// полный адрес\nmethod:'POST',body:formData});if(!response.ok){const errorData=await response.json();throw new Error(errorData.detail||'Ошибка на сервере');}const data=await response.json();navigate('/result-main',{state:{images:[\"data:image/png;base64,\".concat(data.images[0])],// оборачиваем в массив и исправляем синтаксис\nprompts:[prompt],// тоже массив\nstoryline:'Изменено в редакторе'// можно оставить пустым, если не используется\n}});}catch(error){alert('Ошибка генерации: '+error.message);}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"generate-container\",style:{maxWidth:600,margin:'30px auto',padding:20},children:[/*#__PURE__*/_jsx(\"h1\",{style:{textAlign:'center',marginBottom:20},children:\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u0438\\u0435 \\u0438\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u044F (Image2Image \\u0441 \\u043C\\u0430\\u0441\\u043A\\u043E\\u0439)\"}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:14,color:'#555',marginBottom:20},children:\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u0435 \\u0432\\u0430\\u0448\\u0435 \\u0438\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u0435, \\u0432\\u044B\\u0434\\u0435\\u043B\\u0438\\u0442\\u0435 \\u043A\\u0438\\u0441\\u0442\\u043E\\u0447\\u043A\\u043E\\u0439 \\u043E\\u0431\\u043B\\u0430\\u0441\\u0442\\u044C \\u0434\\u043B\\u044F \\u0438\\u0437\\u043C\\u0435\\u043D\\u0435\\u043D\\u0438\\u044F, \\u0432\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043F\\u0440\\u043E\\u043C\\u043F\\u0442 \\u0438 \\u043D\\u0430\\u0436\\u043C\\u0438\\u0442\\u0435 \\\"\\u041D\\u0430\\u0447\\u0430\\u0442\\u044C \\u0433\\u0435\\u043D\\u0435\\u0440\\u0430\\u0446\\u0438\\u044E\\\".\"}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"\\u041E\\u043F\\u0438\\u0448\\u0438\\u0442\\u0435, \\u0447\\u0442\\u043E \\u0445\\u043E\\u0442\\u0438\\u0442\\u0435 \\u0434\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0438\\u043B\\u0438 \\u0438\\u0437\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C...\",value:prompt,onChange:e=>setPrompt(e.target.value),rows:3,style:{width:'100%',padding:10,fontSize:16,borderRadius:6,border:'1px solid #ccc',marginBottom:20,resize:'none',fontFamily:'Arial, sans-serif'},disabled:loading}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:20},children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:handleImageUpload,disabled:loading,style:{marginBottom:10}}),imageURL&&/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative',border:'1px solid #ddd',borderRadius:6},children:[/*#__PURE__*/_jsx(\"img\",{ref:imgRef,src:imageURL,alt:\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0436\\u0435\\u043D\\u043D\\u043E\\u0435\",style:{display:'block',maxWidth:'100%',borderRadius:6},onLoad:()=>{if(imgRef.current&&canvasRef.current){canvasRef.current.width=imgRef.current.width;canvasRef.current.height=imgRef.current.height;}clearMask();}}),/*#__PURE__*/_jsx(\"canvas\",{ref:canvasRef,style:{position:'absolute',top:0,left:0,cursor:'crosshair',borderRadius:6,userSelect:'none'},onMouseDown:handleMouseDown,onMouseUp:handleMouseUp,onMouseLeave:handleMouseUp,onMouseMove:handleMouseMove})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',gap:10},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(-1),disabled:loading,style:{flex:1,padding:'10px 0',borderRadius:6,border:'1px solid #ccc',background:'#fff',cursor:'pointer',fontWeight:'bold'},children:\"\\u041D\\u0430\\u0437\\u0430\\u0434\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleGenerateClick,disabled:loading,style:{flex:2,padding:'10px 0',borderRadius:6,border:'none',background:'#6c63ff',color:'white',fontWeight:'bold',cursor:'pointer'},children:loading?'Генерация...':'Начать генерацию'})]})]});}","map":{"version":3,"names":["React","useState","useRef","useEffect","useNavigate","jsx","_jsx","jsxs","_jsxs","GenerateCharacter","navigate","prompt","setPrompt","imageFile","setImageFile","imageURL","setImageURL","loading","setLoading","setResultImage","canvasRef","imgRef","isDrawing","setIsDrawing","lastPos","setLastPos","x","y","getCurrentUser","user","localStorage","getItem","JSON","parse","_unused","handleImageUpload","e","file","target","files","url","URL","createObjectURL","handleMouseDown","current","rect","getBoundingClientRect","clientX","left","clientY","top","handleMouseUp","handleMouseMove","ctx","getContext","currentX","currentY","strokeStyle","lineWidth","lineCap","globalAlpha","beginPath","moveTo","lineTo","stroke","clearMask","clearRect","width","height","handleGenerateClick","state","from","trim","alert","formData","FormData","append","maskBlob","Promise","resolve","toBlob","response","fetch","method","body","ok","errorData","json","Error","detail","data","images","concat","prompts","storyline","error","message","className","style","maxWidth","margin","padding","children","textAlign","marginBottom","fontSize","color","placeholder","value","onChange","rows","borderRadius","border","resize","fontFamily","disabled","type","accept","position","ref","src","alt","display","onLoad","cursor","userSelect","onMouseDown","onMouseUp","onMouseLeave","onMouseMove","justifyContent","gap","onClick","flex","background","fontWeight"],"sources":["/var/www/storysight/src/pages/GenerateCharacter.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport './Generate.css';\n\nexport default function GenerateCharacter() {\n    const navigate = useNavigate();\n\n    const [prompt, setPrompt] = useState('');\n    const [imageFile, setImageFile] = useState(null);\n    const [imageURL, setImageURL] = useState(null);\n    const [loading, setLoading] = useState(false);\n    const [, setResultImage] = useState(null); // для результата\n\n    const canvasRef = useRef(null);\n    const imgRef = useRef(null);\n    const [isDrawing, setIsDrawing] = useState(false);\n    const [lastPos, setLastPos] = useState({ x: 0, y: 0 });\n\n    // Получение пользователя из localStorage\n    function getCurrentUser() {\n        try {\n            const user = localStorage.getItem('user'); // ключ 'user' или 'token' по твоему хранению\n            return user ? JSON.parse(user) : null;\n        } catch {\n            return null;\n        }\n    }\n\n    const handleImageUpload = (e) => {\n        const file = e.target.files[0];\n        if (!file) return;\n        setImageFile(file);\n        const url = URL.createObjectURL(file);\n        setImageURL(url);\n        setResultImage(null); // сброс результата при новом файле\n    };\n\n    const handleMouseDown = (e) => {\n        if (!canvasRef.current) return;\n        setIsDrawing(true);\n        const rect = canvasRef.current.getBoundingClientRect();\n        setLastPos({ x: e.clientX - rect.left, y: e.clientY - rect.top });\n    };\n\n    const handleMouseUp = () => {\n        setIsDrawing(false);\n    };\n\n    const handleMouseMove = (e) => {\n        if (!isDrawing || !canvasRef.current) return;\n        const ctx = canvasRef.current.getContext('2d');\n        const rect = canvasRef.current.getBoundingClientRect();\n        const currentX = e.clientX - rect.left;\n        const currentY = e.clientY - rect.top;\n\n        ctx.strokeStyle = 'white';  // белая кисть\n        ctx.lineWidth = 20;\n        ctx.lineCap = 'round';\n        ctx.globalAlpha = 1.0; // полностью непрозрачная кисть\n\n        ctx.beginPath();\n        ctx.moveTo(lastPos.x, lastPos.y);\n        ctx.lineTo(currentX, currentY);\n        ctx.stroke();\n\n        setLastPos({ x: currentX, y: currentY });\n    };\n\n    const clearMask = () => {\n        if (!canvasRef.current) return;\n        const ctx = canvasRef.current.getContext('2d');\n        ctx.clearRect(0, 0, canvasRef.current.width, canvasRef.current.height);\n    };\n\n    useEffect(() => {\n        clearMask();\n        setResultImage(null);\n    }, [imageURL]);\n\n    const handleGenerateClick = async () => {\n        // Проверяем, есть ли залогиненный пользователь\n        const user = getCurrentUser();\n        if (!user) {\n            // если нет — отправляем на страницу логина\n            navigate('/telegram-login', { state: { from: '/generate-character' } });\n            return;\n        }\n\n        if (!prompt.trim()) {\n            alert('Пожалуйста, введите промпт.');\n            return;\n        }\n        if (!imageFile) {\n            alert('Пожалуйста, загрузите изображение.');\n            return;\n        }\n\n        setLoading(true);\n\n        try {\n            const formData = new FormData();\n            formData.append('prompt', prompt);\n            formData.append('character_name', 'MyCharacter'); // обязательно!\n            formData.append('init_image', imageFile);\n\n            // Получаем blob маски из canvas (формат PNG)\n            const maskBlob = await new Promise((resolve) =>\n                canvasRef.current.toBlob(resolve, 'image/png')\n            );\n            formData.append('mask_image', maskBlob);\n\n            const response = await fetch('http://storysight.ru/api/edit-character', { // полный адрес\n                method: 'POST',\n                body: formData,\n            });\n\n            if (!response.ok) {\n                const errorData = await response.json();\n                throw new Error(errorData.detail || 'Ошибка на сервере');\n            }\n\n            const data = await response.json();\n\n            navigate('/result-main', {\n                state: {\n                    images: [`data:image/png;base64,${data.images[0]}`], // оборачиваем в массив и исправляем синтаксис\n                    prompts: [prompt], // тоже массив\n                    storyline: 'Изменено в редакторе', // можно оставить пустым, если не используется\n                },\n            });\n        } catch (error) {\n            alert('Ошибка генерации: ' + error.message);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    return (\n        <div className=\"generate-container\" style={{ maxWidth: 600, margin: '30px auto', padding: 20 }}>\n            <h1 style={{ textAlign: 'center', marginBottom: 20 }}>\n                Редактирование изображения (Image2Image с маской)\n            </h1>\n\n            <p style={{ fontSize: 14, color: '#555', marginBottom: 20 }}>\n                Загрузите ваше изображение, выделите кисточкой область для изменения, введите промпт и нажмите\n                \"Начать генерацию\".\n            </p>\n\n            <textarea\n                placeholder=\"Опишите, что хотите добавить или изменить...\"\n                value={prompt}\n                onChange={(e) => setPrompt(e.target.value)}\n                rows={3}\n                style={{\n                    width: '100%',\n                    padding: 10,\n                    fontSize: 16,\n                    borderRadius: 6,\n                    border: '1px solid #ccc',\n                    marginBottom: 20,\n                    resize: 'none',\n                    fontFamily: 'Arial, sans-serif',\n                }}\n                disabled={loading}\n            />\n\n            <div style={{ marginBottom: 20 }}>\n                <input\n                    type=\"file\"\n                    accept=\"image/*\"\n                    onChange={handleImageUpload}\n                    disabled={loading}\n                    style={{ marginBottom: 10 }}\n                />\n\n                {imageURL && (\n                    <div style={{ position: 'relative', border: '1px solid #ddd', borderRadius: 6 }}>\n                        <img\n                            ref={imgRef}\n                            src={imageURL}\n                            alt=\"Загруженное\"\n                            style={{ display: 'block', maxWidth: '100%', borderRadius: 6 }}\n                            onLoad={() => {\n                                if (imgRef.current && canvasRef.current) {\n                                    canvasRef.current.width = imgRef.current.width;\n                                    canvasRef.current.height = imgRef.current.height;\n                                }\n                                clearMask();\n                            }}\n                        />\n                        <canvas\n                            ref={canvasRef}\n                            style={{\n                                position: 'absolute',\n                                top: 0,\n                                left: 0,\n                                cursor: 'crosshair',\n                                borderRadius: 6,\n                                userSelect: 'none',\n                            }}\n                            onMouseDown={handleMouseDown}\n                            onMouseUp={handleMouseUp}\n                            onMouseLeave={handleMouseUp}\n                            onMouseMove={handleMouseMove}\n                        />\n                    </div>\n                )}\n            </div>\n\n            <div style={{ display: 'flex', justifyContent: 'space-between', gap: 10 }}>\n                <button\n                    onClick={() => navigate(-1)}\n                    disabled={loading}\n                    style={{\n                        flex: 1,\n                        padding: '10px 0',\n                        borderRadius: 6,\n                        border: '1px solid #ccc',\n                        background: '#fff',\n                        cursor: 'pointer',\n                        fontWeight: 'bold',\n                    }}\n                >\n                    Назад\n                </button>\n\n                <button\n                    onClick={handleGenerateClick}\n                    disabled={loading}\n                    style={{\n                        flex: 2,\n                        padding: '10px 0',\n                        borderRadius: 6,\n                        border: 'none',\n                        background: '#6c63ff',\n                        color: 'white',\n                        fontWeight: 'bold',\n                        cursor: 'pointer',\n                    }}\n                >\n                    {loading ? 'Генерация...' : 'Начать генерацию'}\n                </button>\n            </div>\n        </div>\n    );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
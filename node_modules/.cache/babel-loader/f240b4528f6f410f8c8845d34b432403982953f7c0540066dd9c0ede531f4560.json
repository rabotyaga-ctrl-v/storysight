{"ast":null,"code":"// Template.js\nimport React,{useState}from'react';import'./Template.css';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Template(){const[storyText,setStoryText]=useState('');const[selectedCharacter,setSelectedCharacter]=useState(null);const[numImages,setNumImages]=useState(1);const[errorMessage,setErrorMessage]=useState('');const navigate=useNavigate();const characterTemplates=[{id:'cockatiel',title:'Cockatiel',description:'Весёлые и неугомонные попугаи. Прорекламируют ваш продукт, если вы, конечно, их поймаете.'},{id:'cat',title:'Cat',description:'Ловкий, пушистый и абсолютно не заинтересован в вашем проекте. Но выглядит шикарно, признайте!'},{id:'black_bear',title:'Black bear',description:'Интроверт из мира медведей. Теперь он путешествует и даже пишет свою книгу. Раньше проживал в России.'},{id:'raven',title:'Raven',description:'Ворон-минималист. Немногословен. Оно и понятно, ведь птицы не говорят. Самое главное, что он здесь.'},{id:'tiger',title:'Tiger',description:'УУверенный, красивый и всё такой же опасный. Харизма на максималках. Хищник, инфлюенсер и икона стиля.'}];const API_URL='http://localhost:8000/generate-comic';const handleSubmit=async()=>{if(!storyText.trim()){setErrorMessage('Пожалуйста, введите сюжет.');return;}if(!selectedCharacter){setErrorMessage('Пожалуйста, выберите персонажа.');return;}setErrorMessage('');try{const response=await fetch(API_URL,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({prompt:storyText,character_name:selectedCharacter,num_images:numImages})});if(!response.ok){throw new Error(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430 \\u043F\\u0440\\u0438 \\u0433\\u0435\\u043D\\u0435\\u0440\\u0430\\u0446\\u0438\\u0438: \".concat(response.statusText));}const data=await response.json();const imageBase64List=data.images.map(img=>\"data:image/png;base64,\".concat(img));navigate('/result-main',{state:{images:imageBase64List,storyline:data.storyline,prompts:data.prompts||[]// на всякий случай\n}});}catch(error){console.error('Ошибка:',error);setErrorMessage('Произошла ошибка при генерации. Проверьте подключение и попробуйте снова.');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"choise-wrapper\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"choise-heading\",children:\"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0439\\u0442\\u0435 \\u0441\\u0432\\u043E\\u0439 \\u0441\\u0442\\u043E\\u0440\\u0438\\u0442\\u0435\\u043B\\u043B\\u0438\\u043D\\u0433\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"story-textarea\",placeholder:\"\\u041D\\u0430\\u043F\\u0438\\u0448\\u0438\\u0442\\u0435 \\u0437\\u0434\\u0435\\u0441\\u044C \\u043D\\u0435\\u0431\\u043E\\u043B\\u044C\\u0448\\u043E\\u0439 \\u0441\\u044E\\u0436\\u0435\\u0442 \\u0432\\u0430\\u0448\\u0435\\u0439 \\u0438\\u0441\\u0442\\u043E\\u0440\\u0438\\u0438...\",value:storyText,onChange:e=>setStoryText(e.target.value)}),/*#__PURE__*/_jsx(\"div\",{className:\"character-grid\",children:characterTemplates.map(template=>/*#__PURE__*/_jsx(\"div\",{className:\"character-card-container \".concat(selectedCharacter===template.id?'selected':''),onClick:()=>setSelectedCharacter(template.id),children:/*#__PURE__*/_jsxs(\"div\",{className:\"character-card-inner\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"character-card-front\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"/images/\".concat(template.id,\".jpg\"),alt:template.title,className:\"character-img\",loading:\"lazy\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"character-title\",children:template.title})]}),/*#__PURE__*/_jsx(\"div\",{className:\"character-card-back\",children:/*#__PURE__*/_jsx(\"p\",{children:template.description})})]})},template.id))}),/*#__PURE__*/_jsxs(\"div\",{className:\"slider-wrapper\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"numImages\",className:\"slider-label\",children:[\"\\u041A\\u043E\\u043B\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E \\u0438\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u0439: \",numImages]}),/*#__PURE__*/_jsx(\"input\",{type:\"range\",id:\"numImages\",min:\"1\",max:\"8\",value:numImages,onChange:e=>setNumImages(parseInt(e.target.value)),className:\"slider\"})]}),errorMessage&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:errorMessage}),/*#__PURE__*/_jsx(\"button\",{className:\"generate-btn\",onClick:handleSubmit,children:\"\\u0421\\u0433\\u0435\\u043D\\u0435\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C \\u043A\\u043E\\u043C\\u0438\\u043A\\u0441\"}),/*#__PURE__*/_jsx(\"button\",{className:\"back-btn\",onClick:()=>navigate(\"/create-choice\"),children:\"\\u041D\\u0430\\u0437\\u0430\\u0434\"})]});}","map":{"version":3,"names":["React","useState","useNavigate","jsx","_jsx","jsxs","_jsxs","Template","storyText","setStoryText","selectedCharacter","setSelectedCharacter","numImages","setNumImages","errorMessage","setErrorMessage","navigate","characterTemplates","id","title","description","API_URL","handleSubmit","trim","response","fetch","method","headers","body","JSON","stringify","prompt","character_name","num_images","ok","Error","concat","statusText","data","json","imageBase64List","images","map","img","state","storyline","prompts","error","console","className","children","placeholder","value","onChange","e","target","template","onClick","src","alt","loading","htmlFor","type","min","max","parseInt"],"sources":["C:/Users/rabot/WebstormProjects/storysight/src/pages/Template.js"],"sourcesContent":["// Template.js\r\nimport React, { useState } from 'react';\r\nimport './Template.css';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nexport default function Template() {\r\n  const [storyText, setStoryText] = useState('');\r\n  const [selectedCharacter, setSelectedCharacter] = useState(null);\r\n  const [numImages, setNumImages] = useState(1);\r\n  const [errorMessage, setErrorMessage] = useState('');\r\n  const navigate = useNavigate();\r\n\r\n  const characterTemplates = [\r\n    { id: 'cockatiel', title: 'Cockatiel', description: 'Весёлые и неугомонные попугаи. Прорекламируют ваш продукт, если вы, конечно, их поймаете.' },\r\n    { id: 'cat', title: 'Cat', description: 'Ловкий, пушистый и абсолютно не заинтересован в вашем проекте. Но выглядит шикарно, признайте!' },\r\n    { id: 'black_bear', title: 'Black bear', description: 'Интроверт из мира медведей. Теперь он путешествует и даже пишет свою книгу. Раньше проживал в России.' },\r\n    { id: 'raven', title: 'Raven', description: 'Ворон-минималист. Немногословен. Оно и понятно, ведь птицы не говорят. Самое главное, что он здесь.' },\r\n    { id: 'tiger', title: 'Tiger', description: 'УУверенный, красивый и всё такой же опасный. Харизма на максималках. Хищник, инфлюенсер и икона стиля.' },\r\n  ];\r\n\r\n  const API_URL = 'http://localhost:8000/generate-comic';\r\n\r\n  const handleSubmit = async () => {\r\n    if (!storyText.trim()) {\r\n      setErrorMessage('Пожалуйста, введите сюжет.');\r\n      return;\r\n    }\r\n    if (!selectedCharacter) {\r\n      setErrorMessage('Пожалуйста, выберите персонажа.');\r\n      return;\r\n    }\r\n\r\n    setErrorMessage('');\r\n\r\n    try {\r\n      const response = await fetch(API_URL, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          prompt: storyText,\r\n          character_name: selectedCharacter,\r\n          num_images: numImages,\r\n        }),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`Ошибка при генерации: ${response.statusText}`);\r\n      }\r\n\r\n      const data = await response.json();\r\n\r\n      const imageBase64List = data.images.map((img) => `data:image/png;base64,${img}`);\r\n\r\n      navigate('/result-main', {\r\n        state: {\r\n          images: imageBase64List,\r\n          storyline: data.storyline,\r\n          prompts: data.prompts || [], // на всякий случай\r\n        }\r\n      });\r\n    } catch (error) {\r\n      console.error('Ошибка:', error);\r\n      setErrorMessage('Произошла ошибка при генерации. Проверьте подключение и попробуйте снова.');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"choise-wrapper\">\r\n      <h1 className=\"choise-heading\">Создайте свой сторителлинг</h1>\r\n\r\n      <textarea\r\n        className=\"story-textarea\"\r\n        placeholder=\"Напишите здесь небольшой сюжет вашей истории...\"\r\n        value={storyText}\r\n        onChange={(e) => setStoryText(e.target.value)}\r\n      />\r\n\r\n      <div className=\"character-grid\">\r\n        {characterTemplates.map((template) => (\r\n          <div\r\n            key={template.id}\r\n            className={`character-card-container ${selectedCharacter === template.id ? 'selected' : ''}`}\r\n            onClick={() => setSelectedCharacter(template.id)}\r\n          >\r\n            <div className=\"character-card-inner\">\r\n              <div className=\"character-card-front\">\r\n                <img\r\n                  src={`/images/${template.id}.jpg`}\r\n                  alt={template.title}\r\n                  className=\"character-img\"\r\n                  loading=\"lazy\"\r\n                />\r\n                <h3 className=\"character-title\">{template.title}</h3>\r\n              </div>\r\n              <div className=\"character-card-back\">\r\n                <p>{template.description}</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      <div className=\"slider-wrapper\">\r\n        <label htmlFor=\"numImages\" className=\"slider-label\">\r\n          Количество изображений: {numImages}\r\n        </label>\r\n        <input\r\n          type=\"range\"\r\n          id=\"numImages\"\r\n          min=\"1\"\r\n          max=\"8\"\r\n          value={numImages}\r\n          onChange={(e) => setNumImages(parseInt(e.target.value))}\r\n          className=\"slider\"\r\n        />\r\n      </div>\r\n\r\n      {errorMessage && <div className=\"error-message\">{errorMessage}</div>}\r\n\r\n      <button className=\"generate-btn\" onClick={handleSubmit}>\r\n        Сгенерировать комикс\r\n      </button>\r\n\r\n      <button className=\"back-btn\" onClick={() => navigate(\"/create-choice\")}>\r\n        Назад\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"AAAA;AACA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,MAAO,gBAAgB,CACvB,OAASC,WAAW,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE/C,cAAe,SAAS,CAAAC,QAAQA,CAAA,CAAG,CACjC,KAAM,CAACC,SAAS,CAAEC,YAAY,CAAC,CAAGR,QAAQ,CAAC,EAAE,CAAC,CAC9C,KAAM,CAACS,iBAAiB,CAAEC,oBAAoB,CAAC,CAAGV,QAAQ,CAAC,IAAI,CAAC,CAChE,KAAM,CAACW,SAAS,CAAEC,YAAY,CAAC,CAAGZ,QAAQ,CAAC,CAAC,CAAC,CAC7C,KAAM,CAACa,YAAY,CAAEC,eAAe,CAAC,CAAGd,QAAQ,CAAC,EAAE,CAAC,CACpD,KAAM,CAAAe,QAAQ,CAAGd,WAAW,CAAC,CAAC,CAE9B,KAAM,CAAAe,kBAAkB,CAAG,CACzB,CAAEC,EAAE,CAAE,WAAW,CAAEC,KAAK,CAAE,WAAW,CAAEC,WAAW,CAAE,2FAA4F,CAAC,CACjJ,CAAEF,EAAE,CAAE,KAAK,CAAEC,KAAK,CAAE,KAAK,CAAEC,WAAW,CAAE,gGAAiG,CAAC,CAC1I,CAAEF,EAAE,CAAE,YAAY,CAAEC,KAAK,CAAE,YAAY,CAAEC,WAAW,CAAE,uGAAwG,CAAC,CAC/J,CAAEF,EAAE,CAAE,OAAO,CAAEC,KAAK,CAAE,OAAO,CAAEC,WAAW,CAAE,qGAAsG,CAAC,CACnJ,CAAEF,EAAE,CAAE,OAAO,CAAEC,KAAK,CAAE,OAAO,CAAEC,WAAW,CAAE,wGAAyG,CAAC,CACvJ,CAED,KAAM,CAAAC,OAAO,CAAG,sCAAsC,CAEtD,KAAM,CAAAC,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/B,GAAI,CAACd,SAAS,CAACe,IAAI,CAAC,CAAC,CAAE,CACrBR,eAAe,CAAC,4BAA4B,CAAC,CAC7C,OACF,CACA,GAAI,CAACL,iBAAiB,CAAE,CACtBK,eAAe,CAAC,iCAAiC,CAAC,CAClD,OACF,CAEAA,eAAe,CAAC,EAAE,CAAC,CAEnB,GAAI,CACF,KAAM,CAAAS,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAACJ,OAAO,CAAE,CACpCK,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CAAE,cAAc,CAAE,kBAAmB,CAAC,CAC/CC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CACnBC,MAAM,CAAEvB,SAAS,CACjBwB,cAAc,CAAEtB,iBAAiB,CACjCuB,UAAU,CAAErB,SACd,CAAC,CACH,CAAC,CAAC,CAEF,GAAI,CAACY,QAAQ,CAACU,EAAE,CAAE,CAChB,KAAM,IAAI,CAAAC,KAAK,oHAAAC,MAAA,CAA0BZ,QAAQ,CAACa,UAAU,CAAE,CAAC,CACjE,CAEA,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAd,QAAQ,CAACe,IAAI,CAAC,CAAC,CAElC,KAAM,CAAAC,eAAe,CAAGF,IAAI,CAACG,MAAM,CAACC,GAAG,CAAEC,GAAG,2BAAAP,MAAA,CAA8BO,GAAG,CAAE,CAAC,CAEhF3B,QAAQ,CAAC,cAAc,CAAE,CACvB4B,KAAK,CAAE,CACLH,MAAM,CAAED,eAAe,CACvBK,SAAS,CAAEP,IAAI,CAACO,SAAS,CACzBC,OAAO,CAAER,IAAI,CAACQ,OAAO,EAAI,EAAI;AAC/B,CACF,CAAC,CAAC,CACJ,CAAE,MAAOC,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,SAAS,CAAEA,KAAK,CAAC,CAC/BhC,eAAe,CAAC,2EAA2E,CAAC,CAC9F,CACF,CAAC,CAED,mBACET,KAAA,QAAK2C,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7B9C,IAAA,OAAI6C,SAAS,CAAC,gBAAgB,CAAAC,QAAA,CAAC,oJAA0B,CAAI,CAAC,cAE9D9C,IAAA,aACE6C,SAAS,CAAC,gBAAgB,CAC1BE,WAAW,CAAC,oPAAiD,CAC7DC,KAAK,CAAE5C,SAAU,CACjB6C,QAAQ,CAAGC,CAAC,EAAK7C,YAAY,CAAC6C,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CAC/C,CAAC,cAEFhD,IAAA,QAAK6C,SAAS,CAAC,gBAAgB,CAAAC,QAAA,CAC5BjC,kBAAkB,CAACyB,GAAG,CAAEc,QAAQ,eAC/BpD,IAAA,QAEE6C,SAAS,6BAAAb,MAAA,CAA8B1B,iBAAiB,GAAK8C,QAAQ,CAACtC,EAAE,CAAG,UAAU,CAAG,EAAE,CAAG,CAC7FuC,OAAO,CAAEA,CAAA,GAAM9C,oBAAoB,CAAC6C,QAAQ,CAACtC,EAAE,CAAE,CAAAgC,QAAA,cAEjD5C,KAAA,QAAK2C,SAAS,CAAC,sBAAsB,CAAAC,QAAA,eACnC5C,KAAA,QAAK2C,SAAS,CAAC,sBAAsB,CAAAC,QAAA,eACnC9C,IAAA,QACEsD,GAAG,YAAAtB,MAAA,CAAaoB,QAAQ,CAACtC,EAAE,QAAO,CAClCyC,GAAG,CAAEH,QAAQ,CAACrC,KAAM,CACpB8B,SAAS,CAAC,eAAe,CACzBW,OAAO,CAAC,MAAM,CACf,CAAC,cACFxD,IAAA,OAAI6C,SAAS,CAAC,iBAAiB,CAAAC,QAAA,CAAEM,QAAQ,CAACrC,KAAK,CAAK,CAAC,EAClD,CAAC,cACNf,IAAA,QAAK6C,SAAS,CAAC,qBAAqB,CAAAC,QAAA,cAClC9C,IAAA,MAAA8C,QAAA,CAAIM,QAAQ,CAACpC,WAAW,CAAI,CAAC,CAC1B,CAAC,EACH,CAAC,EAjBDoC,QAAQ,CAACtC,EAkBX,CACN,CAAC,CACC,CAAC,cAENZ,KAAA,QAAK2C,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7B5C,KAAA,UAAOuD,OAAO,CAAC,WAAW,CAACZ,SAAS,CAAC,cAAc,CAAAC,QAAA,EAAC,mIAC1B,CAACtC,SAAS,EAC7B,CAAC,cACRR,IAAA,UACE0D,IAAI,CAAC,OAAO,CACZ5C,EAAE,CAAC,WAAW,CACd6C,GAAG,CAAC,GAAG,CACPC,GAAG,CAAC,GAAG,CACPZ,KAAK,CAAExC,SAAU,CACjByC,QAAQ,CAAGC,CAAC,EAAKzC,YAAY,CAACoD,QAAQ,CAACX,CAAC,CAACC,MAAM,CAACH,KAAK,CAAC,CAAE,CACxDH,SAAS,CAAC,QAAQ,CACnB,CAAC,EACC,CAAC,CAELnC,YAAY,eAAIV,IAAA,QAAK6C,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAEpC,YAAY,CAAM,CAAC,cAEpEV,IAAA,WAAQ6C,SAAS,CAAC,cAAc,CAACQ,OAAO,CAAEnC,YAAa,CAAA4B,QAAA,CAAC,qHAExD,CAAQ,CAAC,cAET9C,IAAA,WAAQ6C,SAAS,CAAC,UAAU,CAACQ,OAAO,CAAEA,CAAA,GAAMzC,QAAQ,CAAC,gBAAgB,CAAE,CAAAkC,QAAA,CAAC,gCAExE,CAAQ,CAAC,EACN,CAAC,CAEV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
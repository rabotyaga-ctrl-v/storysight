{"ast":null,"code":"import{useEffect,useState}from'react';import{jsxs as _jsxs,jsx as _jsx,Fragment as _Fragment}from\"react/jsx-runtime\";export default function TelegramLogin(){const[user,setUser]=useState(null);useEffect(()=>{var _document$getElementB;const savedUser=localStorage.getItem('tg_user');if(savedUser){setUser(JSON.parse(savedUser));}window.onTelegramAuth=userData=>{localStorage.setItem('tg_user',JSON.stringify(userData));setUser(userData);};const script=document.createElement('script');script.src='https://telegram.org/js/telegram-widget.js?22';script.async=true;script.setAttribute('data-telegram-login','zavod_worker_bot');// имя бота\nscript.setAttribute('data-size','large');script.setAttribute('data-userpic','false');script.setAttribute('data-request-access','write');script.setAttribute('data-onauth','onTelegramAuth(user)');(_document$getElementB=document.getElementById('telegram-button'))===null||_document$getElementB===void 0?void 0:_document$getElementB.appendChild(script);},[]);const handleLogout=()=>{localStorage.removeItem('tg_user');setUser(null);};return/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',flexDirection:'column',alignItems:'center',justifyContent:'center',height:'100vh',background:'linear-gradient(to right, #fbc2eb, #a6c1ee)',fontFamily:'Manrope, sans-serif',textAlign:'center',padding:'20px'},children:user?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"\\u0414\\u043E\\u0431\\u0440\\u043E \\u043F\\u043E\\u0436\\u0430\\u043B\\u043E\\u0432\\u0430\\u0442\\u044C, @\",user.username,\"!\"]}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u0412\\u044B \\u0443\\u0441\\u043F\\u0435\\u0448\\u043D\\u043E \\u0432\\u043E\\u0448\\u043B\\u0438 \\u0447\\u0435\\u0440\\u0435\\u0437 Telegram.\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,style:{marginTop:'20px',padding:'10px 20px',border:'none',borderRadius:'8px',backgroundColor:'#ff5e7e',color:'white',cursor:'pointer',fontSize:'16px'},children:\"\\u0412\\u044B\\u0439\\u0442\\u0438\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u0412\\u043E\\u0439\\u0442\\u0438 \\u0432 \\u0430\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u0410\\u0432\\u0442\\u043E\\u0440\\u0438\\u0437\\u0443\\u0439\\u0442\\u0435\\u0441\\u044C \\u0447\\u0435\\u0440\\u0435\\u0437 Telegram, \\u0447\\u0442\\u043E\\u0431\\u044B \\u0441\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C \\u0432\\u0430\\u0448\\u0438 \\u0438\\u0441\\u0442\\u043E\\u0440\\u0438\\u0438 \\u0438 \\u0438\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u044F.\"}),/*#__PURE__*/_jsx(\"div\",{id:\"telegram-button\",style:{marginTop:'20px'}})]})});}","map":{"version":3,"names":["useEffect","useState","jsxs","_jsxs","jsx","_jsx","Fragment","_Fragment","TelegramLogin","user","setUser","_document$getElementB","savedUser","localStorage","getItem","JSON","parse","window","onTelegramAuth","userData","setItem","stringify","script","document","createElement","src","async","setAttribute","getElementById","appendChild","handleLogout","removeItem","style","display","flexDirection","alignItems","justifyContent","height","background","fontFamily","textAlign","padding","children","username","onClick","marginTop","border","borderRadius","backgroundColor","color","cursor","fontSize","id"],"sources":["/root/diplomka/src/pages/TelegramLogin.jsx"],"sourcesContent":["import { useEffect, useState } from 'react';\n\nexport default function TelegramLogin() {\n    const [user, setUser] = useState(null);\n\n    useEffect(() => {\n        const savedUser = localStorage.getItem('tg_user');\n        if (savedUser) {\n            setUser(JSON.parse(savedUser));\n        }\n\n        window.onTelegramAuth = (userData) => {\n            localStorage.setItem('tg_user', JSON.stringify(userData));\n            setUser(userData);\n        };\n\n        const script = document.createElement('script');\n        script.src = 'https://telegram.org/js/telegram-widget.js?22';\n        script.async = true;\n        script.setAttribute('data-telegram-login', 'zavod_worker_bot'); // имя бота\n        script.setAttribute('data-size', 'large');\n        script.setAttribute('data-userpic', 'false');\n        script.setAttribute('data-request-access', 'write');\n        script.setAttribute('data-onauth', 'onTelegramAuth(user)');\n        document.getElementById('telegram-button')?.appendChild(script);\n    }, []);\n\n    const handleLogout = () => {\n        localStorage.removeItem('tg_user');\n        setUser(null);\n    };\n\n    return (\n        <div\n            style={{\n                display: 'flex',\n                flexDirection: 'column',\n                alignItems: 'center',\n                justifyContent: 'center',\n                height: '100vh',\n                background: 'linear-gradient(to right, #fbc2eb, #a6c1ee)',\n                fontFamily: 'Manrope, sans-serif',\n                textAlign: 'center',\n                padding: '20px'\n            }}\n        >\n            {user ? (\n                <>\n                    <h2>Добро пожаловать, @{user.username}!</h2>\n                    <p>Вы успешно вошли через Telegram.</p>\n                    <button\n                        onClick={handleLogout}\n                        style={{\n                            marginTop: '20px',\n                            padding: '10px 20px',\n                            border: 'none',\n                            borderRadius: '8px',\n                            backgroundColor: '#ff5e7e',\n                            color: 'white',\n                            cursor: 'pointer',\n                            fontSize: '16px'\n                        }}\n                    >\n                        Выйти\n                    </button>\n                </>\n            ) : (\n                <>\n                    <h1>Войти в аккаунт</h1>\n                    <p>Авторизуйтесь через Telegram, чтобы сохранить ваши истории и изображения.</p>\n                    <div id=\"telegram-button\" style={{ marginTop: '20px' }}></div>\n                </>\n            )}\n        </div>\n    );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}